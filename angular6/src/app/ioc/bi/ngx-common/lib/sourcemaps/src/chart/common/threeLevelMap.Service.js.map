{"version":3,"sources":["src/chart/common/threeLevelMap.Service.ts"],"names":[],"mappings":"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","file":"../../../../src/chart/common/threeLevelMap.Service.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nvar d3 = require('d3');\r\n\r\nimport * as $ from 'jquery';\r\n@Injectable()\r\n\r\nexport class ThreeLevelMapService {\r\n\r\n    tipHeader = null;\r\n    drillData = [];\r\n    provinceData = {};\r\n    mapData: any = {};\r\n\r\n    constructor() {}\r\n\r\n    public getZoomScale(features, width, height){\r\n        var longitudeMin = 100000;\r\n        var latitudeMin = 100000;\r\n        var longitudeMax = 0;\r\n        var latitudeMax = 0;\r\n        features.forEach(function(e){\r\n            var a = d3.geoBounds(e);\r\n            if(a[0][0] < longitudeMin) {\r\n                longitudeMin = a[0][0];\r\n            }\r\n            if(a[0][1] < latitudeMin) {\r\n                latitudeMin = a[0][1];\r\n            }\r\n            if(a[1][0] > longitudeMax) {\r\n                longitudeMax = a[1][0];\r\n            }\r\n            if(a[1][1] > latitudeMax) {\r\n                latitudeMax = a[1][1];\r\n            }\r\n        });\r\n        var a = longitudeMax - longitudeMin;\r\n        var b = latitudeMax - latitudeMin;\r\n        if(width/height >= a/b){\r\n            return height/b;\r\n        } else {\r\n            return width/a;\r\n        }\r\n    };\r\n    public getCenters(features){\r\n        var longitudeMin = 100000;\r\n        var latitudeMin = 100000;\r\n        var longitudeMax = 0;\r\n        var latitudeMax = 0;\r\n        features.forEach(function(e){\r\n            var a = d3.geo.bounds(e);\r\n            if(a[0][0] < longitudeMin) {\r\n                longitudeMin = a[0][0];\r\n            }\r\n            if(a[0][1] < latitudeMin) {\r\n                latitudeMin = a[0][1];\r\n            }\r\n            if(a[1][0] > longitudeMax) {\r\n                longitudeMax = a[1][0];\r\n            }\r\n            if(a[1][1] > latitudeMax) {\r\n                latitudeMax = a[1][1];\r\n            }\r\n        });\r\n        var a = (longitudeMax + longitudeMin)/2;\r\n        var b = (latitudeMax + latitudeMin)/2;\r\n        return [a, b];\r\n    };\r\n    public fillColor(data,name) {\r\n        var rowHeaderLength = 0,\r\n            columnHeaderLength = 0,\r\n            columnHeaderLink = [],\r\n            columnMax,\r\n            columnMin,\r\n            columnList = [],\r\n            dataValue = null;\r\n        data ? data[0].map(function(d){\r\n            d.property == 'header_empty' ? rowHeaderLength++ : null;\r\n        }) : null;\r\n        data.map(function (d) {\r\n            d[0] ? (d[0].property == 'header_empty' ? columnHeaderLength++ : null) : null;\r\n        });\r\n        if (data[rowHeaderLength]) {\r\n            for (var n = rowHeaderLength; n < data[rowHeaderLength].length; n++) {\r\n                var title = [];\r\n                if (rowHeaderLength) {\r\n                    for (var m = 0; m < columnHeaderLength + 1; m++) {\r\n                        title.push(data[m][n].data);\r\n                    }\r\n                    columnHeaderLink.push(title.join('-'));\r\n                    this.tipHeader = columnHeaderLink[0];\r\n                }\r\n                else {\r\n                    data[0].map(function (d) {\r\n                        d['column_header_header'] ? rowHeaderLength++ : null;\r\n                    });\r\n                    this.tipHeader = data[0][rowHeaderLength] ? data[0][rowHeaderLength].data : null;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (data[0].length) {\r\n            for (var i = columnHeaderLength + 1; i < data.length; i++) {\r\n                (data[i][rowHeaderLength].data == \"N/A\" ?  columnList.push(0) :\r\n                    columnList.push(parseInt(data[i][rowHeaderLength].data)));\r\n            }\r\n        }\r\n        columnMax = d3.max(columnList);\r\n        columnMin = d3.min(columnList);\r\n        var computeColor = d3.interpolate(d3.rgb(180,227,248), d3.rgb(2,112,221));\r\n        var linear = d3.scaleLinear()\r\n            .domain([columnMin, columnMax])\r\n            .range([0, 1]);\r\n        if (data[0].length) {\r\n            data.map(function (d) {\r\n                (d[rowHeaderLength - 1] && d[rowHeaderLength - 1].data) == name ? dataValue = d[rowHeaderLength].data : null;\r\n            });\r\n        }\r\n        if (dataValue < 0){\r\n            color = \"#FF7A4C\";\r\n        }\r\n        else if (dataValue == null || dataValue == 'N/A'){\r\n            color = \"#F0F0F0\";\r\n        }\r\n        else {\r\n            var t = linear(dataValue);\r\n            var color = computeColor(t);\r\n        }\r\n        return color;\r\n    };\r\n    public tipData(data, name) {\r\n        var rowHeaderLength = 0,\r\n            columnHeaderLength = 0,\r\n            tipsArray = [],\r\n            columnHeaderLink = [];\r\n        data ? data[0].map(function(d){\r\n            d.property == 'header_empty' ? rowHeaderLength++ : null;\r\n        }) : null;\r\n        data.map(function(d){\r\n            d[0] ? (d[0].property == 'header_empty' ? columnHeaderLength++ : null) : null;\r\n        });\r\n        if (data[rowHeaderLength] && rowHeaderLength) {\r\n            for (var n = rowHeaderLength; n < data[rowHeaderLength].length; n++) {\r\n                var title = [];\r\n                if (rowHeaderLength) {\r\n                    for (var m = 0; m < columnHeaderLength + 1; m++) {\r\n                        title.push(data[m][n].data);\r\n                    }\r\n                    columnHeaderLink.push(title.join('-'));\r\n                }\r\n                else {\r\n                    data[0].map(function (d) {\r\n                        d[0].property == 'column_header_header' ? columnHeaderLink.push(d.data) : rowHeaderLength++;\r\n                    });\r\n                    break;\r\n                }\r\n            }\r\n            for (var k = 0; k < data.length; k++) {\r\n                if (data[k][rowHeaderLength - 1] && data[k][rowHeaderLength - 1].data == name|| data[k][rowHeaderLength].data === name) {\r\n                    for(var t = 0;t < columnHeaderLink.length;t++){\r\n                        var saveHeader = [],\r\n                            headerStr: any = [];\r\n                        saveHeader.push(columnHeaderLink[t]);\r\n                        data[k][t + rowHeaderLength] ? saveHeader.push(data[k][t + rowHeaderLength].data) :\r\n                        saveHeader.push(data[0][rowHeaderLength].data);\r\n                        headerStr = saveHeader.join(\" : \");\r\n                        tipsArray.push(headerStr);\r\n                    }\r\n                    return name+\" :</br>\"+tipsArray.join(\"</br>\");\r\n                }\r\n            }\r\n        }\r\n        else if (rowHeaderLength == 0 && columnHeaderLength == 0) {\r\n            let index = 0;\r\n            let tipslist = [];\r\n            for (let t = 0; t < data.length; t++) {\r\n                for (let j = 0; j < data[t].length; j++) {\r\n                    if (data[t][j].data == name) {\r\n                        index = j + 1;\r\n                        tipslist = data[t];\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            if (!tipslist[0]){\r\n                return name;\r\n            }\r\n            for (let i = index; i < data[0].length; i++) {\r\n                let tipsLink = [];\r\n                tipsLink.push(data[0][i].data);\r\n                tipslist[i] ? tipsLink.push(tipslist[i].data) : null;\r\n                tipsArray.push(tipsLink.join(' : '))\r\n            }\r\n\r\n            return name+\" :</br>\"+tipsArray.join(\"</br>\");\r\n        }\r\n    };\r\n    \r\n    public colorRange(args) {\r\n        var defs = args.svg.append(\"defs\");\r\n        var linearGradient = defs.append(\"linearGradient\")\r\n            .attr(\"id\",\"linearColor\")\r\n            .attr(\"x1\",\"0%\")\r\n            .attr(\"y1\",\"0%\")\r\n            .attr(\"x2\",\"0%\")\r\n            .attr(\"y2\",\"100%\");\r\n\r\n        linearGradient.append(\"stop\")\r\n            .attr(\"offset\",\"0%\")\r\n            .style(\"stop-color\", args.maxColor.toString());\r\n\r\n        linearGradient.append(\"stop\")\r\n            .attr(\"offset\",\"100%\")\r\n            .style(\"stop-color\",args.minColor.toString());\r\n        var colorLength = 130;\r\n        var colorWidth = 20;\r\n        args.svg.append(\"rect\")\r\n            .attr(\"x\", args.width * 0.7 - 7)\r\n            .attr(\"y\", args.height * 0.2)\r\n            .attr(\"width\", colorWidth)\r\n            .attr(\"height\", colorLength)\r\n            .style(\"fill\",\"url(#\" + linearGradient.attr(\"id\") + \")\");\r\n\r\n        //add words\r\n        let argText = args.svg.append(\"text\")\r\n        argText.attr({\r\n                \"class\": \"valueText\",\r\n                \"x\": args.width*0.7 + 5,\r\n                \"y\": args.height*0.2 - 10,\r\n                \"text-anchor\": \"middle\"\r\n            })\r\n        argText.text(() => {return args.contentHeader;});\r\n        args.svg.append(\"text\")\r\n            .attr(\"class\", \"valueText\")\r\n            .attr(\"x\", args.width*0.7 - 40)\r\n            .attr(\"y\", args.height*0.2 + 10)\r\n            .text(\"High\");\r\n        //.text(function(){\r\n        //return minvalue[0];\r\n        //});\r\n\r\n        args.svg.append(\"text\")\r\n            .attr(\"class\",\"valueText\")\r\n            .attr(\"x\", args.width*0.7 - 40)\r\n            .attr(\"y\", args.height*0.2 + colorLength)\r\n            .text(\"Low\");\r\n        //.text(function(){\r\n        //\treturn maxvalue[0];\r\n        //});\r\n    };\r\n    public backToTop(svg, width) {\r\n        var that = this;\r\n        svg.append('image')\r\n            .attr('x', width * 0.7)\r\n            .attr('y', 0)\r\n            .attr('width', 30)\r\n            .attr('height', 30)\r\n            .attr('class', 'backTop')\r\n            .attr('xlink:href', 'imgs/back-top.svg')\r\n            .style('cursor', 'pointer')\r\n            .on('click', function(){\r\n                that.map(that.provinceData);\r\n            });\r\n    };\r\n    public map(options) {\r\n        var mapPath = 'assets/plugins/FineMap/mapdata/china.json';\r\n        var that = this ? this : this;\r\n        that.provinceData = options;\r\n        var width = $('.map_wrapper')[0].clientWidth * 0.95;\r\n        d3.select($('.map_wrapper')[0]).selectAll('svg').remove();\r\n        d3.selectAll('.d3-tip').remove();\r\n        var svg = d3.select($('.map_wrapper')[0]).append('svg')\r\n            .attr('width', width)\r\n            .attr('height', options.height)\r\n            .append('g')\r\n            .attr('transform', ' translate(' + width * 0.18 + ', 30)');\r\n        // 因api没有该功能https://github.com/d3/d3/wiki/API--%E4%B8%AD%E6%96%87%E6%89%8B%E5%86%8C\r\n        // var tip = d3.tip()\r\n        //     .attr('class', 'd3-tip')\r\n        //     .offset([-10, 0]);\r\n        // svg.call(tip);\r\n        var tip = d3.select(\"#preview\").append('div')\r\n            .attr('class', 'd3-tip')\r\n            .style('position', 'absolute')\r\n            .style('zIndex', '10');\r\n        $.getJSON(mapPath, function(root) {\r\n            if(root) {\r\n                var zoomScale = that.getZoomScale(root.features, width, options.height);\r\n                var projection = d3.geoMercator()\r\n                    .center([107, 38])\r\n                    .scale(zoomScale*41)\r\n                    .translate([width/3, options.height/2.5]);\r\n            }else{\r\n                return console.error(root);\r\n            }\r\n\r\n            var path = d3.geoPath().projection(projection);\r\n            svg.selectAll(\".pathChina\")\r\n                .data(root.features).enter()\r\n                .append(\"path\")\r\n                .attr(\"d\", path)\r\n                .attr(\"class\", \"pathChina\")\r\n                .attr(\"stroke\",\"#000\")\r\n                .attr(\"stroke-width\", 0.3)\r\n                .attr(\"fill\", function(d){\r\n                    var nameNode = d.properties.name;\r\n                    return that.fillColor(options.data, nameNode);\r\n                })\r\n                .on(\"mouseover\", function(d){\r\n                    var overColor = \"#99CC00\";\r\n                    var nameNode = d.properties.name;\r\n                    that.backColor = d3.select(this).attr(\"fill\");\r\n                    d3.select(this)\r\n                        .attr(\"fill\", overColor);\r\n                    var tipString = that.tipData(options.data, nameNode) ? that.tipData(options.data, nameNode) : nameNode;\r\n                    $(\".d3-tip\").html(tipString);\r\n                    $(\".d3-tip\").show();\r\n                    // tip.html(tipString);\r\n                    // let e: any = event || window.event;\r\n                    // let x = e.clientX + document.body.scrollLeft - document.body.clientLeft;\r\n                    // let y = e.clientY + document.body.scrollTop - document.body.clientTop;\r\n                    // tip.style(\"top\", (y - 60) + \"px\")\r\n                    //    .style(\"left\", x + \"px\")\r\n                    //    .style('display', 'block');\r\n                })\r\n                .on(\"mousemove\", function(d) {\r\n                    var map_width = $('.pathChina')[0].getBoundingClientRect().width;\r\n                    if (d3.event.layerX < map_width / 2) {\r\n                        d3.select(\".d3-tip\")\r\n                        .style(\"top\", (d3.event.layerY + 15) + \"px\")\r\n                        .style(\"left\", (d3.event.layerX + 15) + \"px\");\r\n                    } else {\r\n                        var tooltip_width = $(\".d3-tip\").width();\r\n                        d3.select(\".d3-tip\")\r\n                        .style(\"top\", (d3.event.layerY + 15) + \"px\")\r\n                        .style(\"left\", (d3.event.layerX - tooltip_width - 30) + \"px\");\r\n                    }\r\n                })\r\n                .on(\"mouseout\", function(){\r\n                    d3.select(this)\r\n                        .attr(\"fill\",that.backColor);\r\n                    $(\".d3-tip\").hide();\r\n                })\r\n                .on(\"click\",function(d){\r\n                    const id = d.properties.id;\r\n                    const value = d.properties.name;\r\n                    const keyId = options.chartConfig.keys[0].id;\r\n                    if (options.drill && options.drill.config[keyId]){\r\n                        if (options.drill.config[keyId].down){\r\n                            options.drill.drillDown(keyId, value, that.getRenderOption, id);\r\n                        }\r\n                    }\r\n                    setTimeout(function(){\r\n                        d3.selectAll(\".pathProvince\").remove();\r\n                        d3.selectAll(\".pathCounty\").remove();\r\n                        that.mapData.city = that.mapData.city || that.drillData[0].data;\r\n                        var pathProvince = \"assets/plugins/FineMap/mapdata/geometryProvince/\" + id + \".json\";\r\n                        var argsProvince = {\r\n                            d: d,\r\n                            data: that.mapData.city,\r\n                            mapPath: pathProvince,\r\n                            svg: svg,\r\n                            width: width,\r\n                            height: options.height,\r\n                            drill: options.drill,\r\n                            drillConfig: that.drillData[1]\r\n                        };\r\n                        that.clickMap(argsProvince);\r\n                    },1000);\r\n                });\r\n            var colorParam = {\r\n                svg: svg,\r\n                minColor: d3.rgb(180,227,248),\r\n                maxColor: d3.rgb(2,112,221),\r\n                width: width,\r\n                height: options.height,\r\n                contentHeader: that.tipHeader\r\n            };\r\n            options.data[0].length ? that.colorRange(colorParam) : null;\r\n            // options.data[0].length ? that.drawBubble(options.data, svg, root, projection) : null;\r\n        })\r\n        // d3.json(mapPath, function(error, root) {\r\n        //     var backColor;\r\n        //     if (error) {\r\n        //         return console.error(error);\r\n        //     } else {\r\n        //         var zoomScale = that.getZoomScale(root.features, width, options.height);\r\n        //         var projection = d3.geo.mercator()\r\n        //             .center([107, 38])\r\n        //             .scale(zoomScale*41)\r\n        //             .translate([width/3, options.height/2.5]);\r\n        //     }\r\n        //     var path = d3.geo.path().projection(projection);\r\n        //     svg.selectAll(\".pathChina\")\r\n        //         .data(root.features).enter()\r\n        //         .append(\"path\")\r\n        //         .attr(\"d\", path)\r\n        //         .attr(\"class\", \"pathChina\")\r\n        //         .attr(\"stroke\",\"#000\")\r\n        //         .attr(\"stroke-width\", 0.3)\r\n        //         .attr(\"fill\", function(d){\r\n        //             var nameNode = d.properties.name;\r\n        //             return that.fillColor(options.data, nameNode);\r\n        //         })\r\n        //         .on(\"mouseover\", function(d){\r\n        //             var overColor = \"#99CC00\";\r\n        //             var nameNode = d.properties.name;\r\n        //             backColor = d3.select(this).attr(\"fill\");\r\n        //             d3.select(this)\r\n        //                 .attr(\"fill\", overColor);\r\n        //             var tipString = that.tipData(options.data, nameNode) ? that.tipData(options.data, nameNode) : nameNode;\r\n        //             // tip.html(tipString);\r\n        //             // tip.show();\r\n        //         })\r\n        //         .on(\"mouseout\", function(){\r\n        //             d3.select(this)\r\n        //                 .attr(\"fill\",backColor);\r\n        //             // tip.hide();\r\n        //         })\r\n        //         .on(\"click\",function(d){\r\n        //             const id = d.properties.id;\r\n        //             const value = d.properties.name;\r\n        //             const keyId = options.chartConfig.keys[0].id;\r\n        //             if (options.drill && options.drill.config[keyId]){\r\n        //                 if (options.drill.config[keyId].down){\r\n        //                     options.drill.drillDown(keyId, value, that.getRenderOption, id);\r\n        //                 }\r\n        //             }\r\n        //             setTimeout(function(){\r\n        //                 d3.selectAll(\".pathProvince\").remove();\r\n        //                 d3.selectAll(\".pathCounty\").remove();\r\n        //                 that.mapData.city = that.mapData.city || that.drillData[0].data;\r\n        //                 var pathProvince = \"plugins/FineMap/mapdata/geometryProvince/\" + id + \".json\";\r\n        //                 var argsProvince = {\r\n        //                     d: d,\r\n        //                     data: that.mapData.city,\r\n        //                     mapPath: pathProvince,\r\n        //                     svg: svg,\r\n        //                     width: width,\r\n        //                     height: options.height,\r\n        //                     drill: options.drill,\r\n        //                     drillConfig: that.drillData[1]\r\n        //                 };\r\n        //                 that.clickMap(argsProvince);\r\n        //             },1000);\r\n        //         });\r\n        //     var colorParam = {\r\n        //         svg: svg,\r\n        //         minColor: d3.rgb(180,227,248),\r\n        //         maxColor: d3.rgb(2,112,221),\r\n        //         width: width,\r\n        //         height: options.height,\r\n        //         contentHeader: that.tipHeader\r\n        //     };\r\n        //     options.data[0].length ? that.colorRange(colorParam) : null;\r\n        //     // options.data[0].length ? that.drawBubble(options.data, svg, root, projection) : null;\r\n        // });\r\n    };\r\n    public clickMap(argsProvince){\r\n        d3.selectAll(\".pathChina\").remove();\r\n        d3.selectAll(\".d3-tip\").remove();\r\n        d3.selectAll(\".scatter\").remove();\r\n        this.drawPrivenceMap(argsProvince);\r\n        this.backToTop(argsProvince.svg, argsProvince.width);\r\n    };\r\n    public drawPrivenceMap(argsProvince) {\r\n        var background,\r\n            that = this;\r\n        $.getJSON(argsProvince.mapPath, function(root) {\r\n            var zoomScale = that.getZoomScale(root.features, argsProvince.width, argsProvince.height);\r\n            var centers = that.getCenters(root.features);\r\n            if (!root)\r\n                return console.error(root);\r\n            var projection = d3.geoMercator()\r\n                .center(centers)\r\n                .scale(zoomScale*40)\r\n                .translate([argsProvince.width/3, argsProvince.height/2]);\r\n            var path = d3.geo.path().projection(projection);\r\n            var tip = d3.behavior.tip()\r\n                .attr('class', 'd3-tip')\r\n                .offset([-10, 0]);\r\n            argsProvince.svg.call(tip);\r\n            argsProvince.svg.selectAll(\".pathProvince\")\r\n                .data(root.features).enter()\r\n                .append(\"path\")\r\n                .attr(\"class\", \"pathProvince\")\r\n                .attr(\"stroke\", \"#000\")\r\n                .attr(\"stroke-width\", 0.3)\r\n                .attr(\"fill\", function(d){\r\n                    var nameNode = d.properties.name;\r\n                    return that.fillColor(argsProvince.data, nameNode);\r\n                })\r\n                .attr(\"d\", path)\r\n                .on(\"mouseover\",function(d){\r\n                    var overColor = \"#99CC00\";\r\n                    var nameNode = d.properties.name;\r\n                    background = d3.select(this).attr(\"fill\");\r\n                    d3.select(this)\r\n                        .attr(\"fill\", overColor);\r\n                    var tipString = that.tipData(argsProvince.data, nameNode) ? that.tipData(argsProvince.data, nameNode) : nameNode;\r\n                    tip.html(tipString);\r\n                    tip.show();\r\n                })\r\n                .on(\"mouseout\",function(){\r\n                    d3.select(this)\r\n                        .attr(\"fill\", background);\r\n                    tip.hide();\r\n                })\r\n                .on(\"click\",function(d){\r\n                    const value = d.properties.name;\r\n                    const keyId = that.drillData[0].chartConfig.keys[1].id;\r\n                    if (argsProvince.drill && that.drillData[1][keyId]){\r\n                        if (that.drillData[1][keyId].down){\r\n                            argsProvince.drill.drillDown(keyId, value, that.getRenderOption);\r\n                        }\r\n                    }\r\n                    setTimeout(function(){\r\n                        that.mapData.district = that.mapData.district ? that.mapData.district : that.drillData[0].data;\r\n                        var argsCountry = {\r\n                            d: d,\r\n                            data: that.mapData.district,\r\n                            svg: argsProvince.svg,\r\n                            width: argsProvince.width,\r\n                            height: argsProvince.height,\r\n                            drill: argsProvince.drill,\r\n                            drillConfig: that.drillData[1]\r\n                        };\r\n                        that.clickProvince(argsCountry);\r\n                    },1000);\r\n                });\r\n            // argsProvince.data != [] ? that.drawBubble(argsProvince.data, argsProvince.svg, root, projection) : null;\r\n        })\r\n        // d3.json(argsProvince.mapPath, function(error, root) {\r\n        //     var zoomScale = that.getZoomScale(root.features, argsProvince.width, argsProvince.height);\r\n        //     var centers = that.getCenters(root.features);\r\n        //     if (error)\r\n        //         return console.error(error);\r\n        //     var projection = d3.geo.mercator()\r\n        //         .center(centers)\r\n        //         .scale(zoomScale*40)\r\n        //         .translate([argsProvince.width/3, argsProvince.height/2]);\r\n        //     var path = d3.geo.path().projection(projection);\r\n        //     var tip = d3.behavior.tip()\r\n        //         .attr('class', 'd3-tip')\r\n        //         .offset([-10, 0]);\r\n        //     argsProvince.svg.call(tip);\r\n        //     argsProvince.svg.selectAll(\".pathProvince\")\r\n        //         .data(root.features).enter()\r\n        //         .append(\"path\")\r\n        //         .attr(\"class\", \"pathProvince\")\r\n        //         .attr(\"stroke\", \"#000\")\r\n        //         .attr(\"stroke-width\", 0.3)\r\n        //         .attr(\"fill\", function(d){\r\n        //             var nameNode = d.properties.name;\r\n        //             return that.fillColor(argsProvince.data, nameNode);\r\n        //         })\r\n        //         .attr(\"d\", path)\r\n        //         .on(\"mouseover\",function(d){\r\n        //             var overColor = \"#99CC00\";\r\n        //             var nameNode = d.properties.name;\r\n        //             background = d3.select(this).attr(\"fill\");\r\n        //             d3.select(this)\r\n        //                 .attr(\"fill\", overColor);\r\n        //             var tipString = that.tipData(argsProvince.data, nameNode) ? that.tipData(argsProvince.data, nameNode) : nameNode;\r\n        //             tip.html(tipString);\r\n        //             tip.show();\r\n        //         })\r\n        //         .on(\"mouseout\",function(){\r\n        //             d3.select(this)\r\n        //                 .attr(\"fill\", background);\r\n        //             tip.hide();\r\n        //         })\r\n        //         .on(\"click\",function(d){\r\n        //             const value = d.properties.name;\r\n        //             const keyId = that.drillData[0].chartConfig.keys[1].id;\r\n        //             if (argsProvince.drill && that.drillData[1][keyId]){\r\n        //                 if (that.drillData[1][keyId].down){\r\n        //                     argsProvince.drill.drillDown(keyId, value, that.getRenderOption);\r\n        //                 }\r\n        //             }\r\n        //             setTimeout(function(){\r\n        //                 that.mapData.district = that.mapData.district ? that.mapData.district : that.drillData[0].data;\r\n        //                 var argsCountry = {\r\n        //                     d: d,\r\n        //                     data: that.mapData.district,\r\n        //                     svg: argsProvince.svg,\r\n        //                     width: argsProvince.width,\r\n        //                     height: argsProvince.height,\r\n        //                     drill: argsProvince.drill,\r\n        //                     drillConfig: that.drillData[1]\r\n        //                 };\r\n        //                 that.clickProvince(argsCountry);\r\n        //             },1000);\r\n        //         });\r\n        //     // argsProvince.data != [] ? that.drawBubble(argsProvince.data, argsProvince.svg, root, projection) : null;\r\n        // });\r\n    };\r\n    public clickProvince(argsCountry) {\r\n        d3.selectAll(\".pathProvince\").remove();\r\n        d3.selectAll(\".pathChina\").remove();\r\n        d3.selectAll(\".d3-tip\").remove();\r\n        this.drawCountyMap(argsCountry);\r\n        this.backToTop(argsCountry.svg, argsCountry.width);\r\n    };\r\n    backColor: any;\r\n    public drawCountyMap(argsCountry) {\r\n        this.backColor = '';\r\n        var that = this;\r\n        var id = argsCountry.d.properties.id;\r\n        var mapPath = \"assets/plugins/FineMap/mapdata/geometryCouties/\" + id + \"00.json\";\r\n        $.getJSON(mapPath, function(root) {\r\n            if (!root)\r\n                return console.error(root);\r\n            var zoomScale = that.getZoomScale(root.features, argsCountry.width, argsCountry.height);\r\n            var centers = that.getCenters(root.features);\r\n            var projection = d3.geoMercator()\r\n                .center(centers)\r\n                .scale(zoomScale*40)\r\n                .translate([argsCountry.width/3, argsCountry.height/2]);\r\n            var path = d3.geo.path().projection(projection);\r\n            var tip = d3.behavior.tip()\r\n                .attr('class', 'd3-tip')\r\n                .offset([-10, 0]);\r\n            argsCountry.svg.call(tip);\r\n            argsCountry.svg.selectAll(\".pathCounty\")\r\n                .data(root.features).enter()\r\n                .append(\"path\")\r\n                .attr(\"class\", \"pathCounty\")\r\n                .attr(\"stroke\",\"#000\")\r\n                .attr(\"stroke-width\",0.3)\r\n                .attr(\"fill\", function(d){\r\n                    var nameNode = d.properties.name;\r\n                    return that.fillColor(argsCountry.data, nameNode);\r\n                })\r\n                .attr(\"d\", path)\r\n                .on(\"mouseover\",function(d){\r\n                    var overColor = \"#99CC00\";\r\n                    var nameNode = d.properties.name;\r\n                    that.backColor = d3.select(this).attr(\"fill\");\r\n                    d3.select(this)\r\n                        .attr(\"fill\", overColor);\r\n                    var tipString =  that.tipData(argsCountry.data, nameNode) ? that.tipData(argsCountry.data, nameNode) : nameNode;\r\n                    tip.html(tipString);\r\n                    tip.show();\r\n                })\r\n                .on(\"mouseout\",function(){\r\n                    d3.select(this)\r\n                        .attr(\"fill\", that.backColor);\r\n                    tip.hide();\r\n                })\r\n            .on(\"click\",function(){\r\n                // const keyId = threeLevelMap.drillData[0].chartConfig.keys[1].id;\r\n                // const chinaJsonPath = \"plugins/map/mapdata/china.json\";\r\n                // if (argsCountry.drill && threeLevelMap.drillData[1][keyId]){\r\n                //     argsCountry.drill.drillUp(keyId, that.getRenderOption);\r\n                // }\r\n                // setTimeout(function () {\r\n                //     var countryObj = {\r\n                //         svg: argsCountry.svg,\r\n                //         data: threeLevelMap.drillData[0].data,\r\n                //         height: argsCountry.height,\r\n                //         width: argsCountry.width,\r\n                //         drill: argsCountry.drill,\r\n                //         chartConfig: threeLevelMap.drillData[0].chartConfig,\r\n                //         mapPath: chinaJsonPath\r\n                //     };\r\n                //     d3.selectAll(\".pathProvince\").remove();\r\n                //     d3.selectAll(\".pathCounty\").remove();\r\n                //     d3.selectAll(\".d3-tip\").remove();\r\n                //     that.map(countryObj);\r\n                // }, 1500);\r\n            });\r\n            // argsCountry.data != [] ? that.drawBubble(argsCountry.data, argsCountry.svg, root, projection) : null;\r\n        })\r\n        // d3.json(mapPath, function(error, root) {\r\n        //     if (error)\r\n        //         return console.error(error);\r\n        //     var zoomScale = that.getZoomScale(root.features, argsCountry.width, argsCountry.height);\r\n        //     var centers = that.getCenters(root.features);\r\n        //     var projection = d3.geo.mercator()\r\n        //         .center(centers)\r\n        //         .scale(zoomScale*40)\r\n        //         .translate([argsCountry.width/3, argsCountry.height/2]);\r\n        //     var path = d3.geo.path().projection(projection);\r\n        //     var tip = d3.behavior.tip()\r\n        //         .attr('class', 'd3-tip')\r\n        //         .offset([-10, 0]);\r\n        //     argsCountry.svg.call(tip);\r\n        //     argsCountry.svg.selectAll(\".pathCounty\")\r\n        //         .data(root.features).enter()\r\n        //         .append(\"path\")\r\n        //         .attr(\"class\", \"pathCounty\")\r\n        //         .attr(\"stroke\",\"#000\")\r\n        //         .attr(\"stroke-width\",0.3)\r\n        //         .attr(\"fill\", function(d){\r\n        //             var nameNode = d.properties.name;\r\n        //             return that.fillColor(argsCountry.data, nameNode);\r\n        //         })\r\n        //         .attr(\"d\", path)\r\n        //         .on(\"mouseover\",function(d){\r\n        //             var overColor = \"#99CC00\";\r\n        //             var nameNode = d.properties.name;\r\n        //             backColor = d3.select(this).attr(\"fill\");\r\n        //             d3.select(this)\r\n        //                 .attr(\"fill\", overColor);\r\n        //             var tipString =  that.tipData(argsCountry.data, nameNode) ? that.tipData(argsCountry.data, nameNode) : nameNode;\r\n        //             tip.html(tipString);\r\n        //             tip.show();\r\n        //         })\r\n        //         .on(\"mouseout\",function(){\r\n        //             d3.select(this)\r\n        //                 .attr(\"fill\", backColor);\r\n        //             tip.hide();\r\n        //         })\r\n        //     .on(\"click\",function(){\r\n        //         // const keyId = threeLevelMap.drillData[0].chartConfig.keys[1].id;\r\n        //         // const chinaJsonPath = \"plugins/map/mapdata/china.json\";\r\n        //         // if (argsCountry.drill && threeLevelMap.drillData[1][keyId]){\r\n        //         //     argsCountry.drill.drillUp(keyId, that.getRenderOption);\r\n        //         // }\r\n        //         // setTimeout(function () {\r\n        //         //     var countryObj = {\r\n        //         //         svg: argsCountry.svg,\r\n        //         //         data: threeLevelMap.drillData[0].data,\r\n        //         //         height: argsCountry.height,\r\n        //         //         width: argsCountry.width,\r\n        //         //         drill: argsCountry.drill,\r\n        //         //         chartConfig: threeLevelMap.drillData[0].chartConfig,\r\n        //         //         mapPath: chinaJsonPath\r\n        //         //     };\r\n        //         //     d3.selectAll(\".pathProvince\").remove();\r\n        //         //     d3.selectAll(\".pathCounty\").remove();\r\n        //         //     d3.selectAll(\".d3-tip\").remove();\r\n        //         //     that.map(countryObj);\r\n        //         // }, 1500);\r\n        //     });\r\n        //     // argsCountry.data != [] ? that.drawBubble(argsCountry.data, argsCountry.svg, root, projection) : null;\r\n        // });\r\n    };\r\n    public getRenderOption(option, drillConfig){\r\n        this.drillData = [];\r\n        this.drillData.push(option);\r\n        this.drillData.push(drillConfig);\r\n    };\r\n    public drawBubble(data, svg, root, projection){\r\n        var rowHeaderLength = 0,\r\n            columnHeaderLength = 0,\r\n            columnHeaderLink = [],\r\n            columnMax,\r\n            columnMin,\r\n            columnList = [];\r\n        data ? data[0].map(function(d){\r\n            d.property == 'header_empty' ? rowHeaderLength++ : null;\r\n        }) : null;\r\n        data.map(function (d) {\r\n            d[0] ? (d[0].property == 'header_empty' ? columnHeaderLength++ : null) : null;\r\n        });\r\n        for (var n = rowHeaderLength; n < data[rowHeaderLength].length; n++) {\r\n            var title = [];\r\n            for (var m = 0; m < columnHeaderLength + 1; m++) {\r\n                title.push(data[m][n].data);\r\n            }\r\n            columnHeaderLink.push(title.join('-'));\r\n        }\r\n        if (data[0].length) {\r\n            for (var i = columnHeaderLength + 1; i < data.length; i++) {\r\n                (data[i][rowHeaderLength].data == \"N/A\" ?  columnList.push(0) :\r\n                    columnList.push(parseInt(data[i][rowHeaderLength].data)));\r\n            }\r\n        }\r\n        columnMax = d3.max(columnList);\r\n        columnMin = d3.min(columnList);\r\n        var paraNumber = d3.scaleLinear()\r\n            .domain([columnMin, columnMax])\r\n            .range([0, 1]);\r\n        var tip = d3.behavior.tip()\r\n            .attr('class', 'd3-tip')\r\n            .offset([-10, 0]);\r\n        svg.call(tip);\r\n        root.features.forEach(function (r) {\r\n            for (var i = 0; i < data.length; i++) {\r\n                if (data[0].length && (r.properties.name == data[i][rowHeaderLength - 1].data)) {\r\n                    var radius;\r\n                    if (data[i][rowHeaderLength].data > 0) {\r\n                        var computeValue = d3.interpolate(2,10);\r\n                        var t = paraNumber(data[i][rowHeaderLength].data);\r\n                        radius = computeValue(t);\r\n                    }\r\n                    else {\r\n                        radius = 4;\r\n                    }\r\n                    var proLocation = projection(r.properties.cp);\r\n                    svg.append(\"circle\")\r\n                        .attr(\"class\", \"scatter\")\r\n                        .attr(\"fill\", '#009933')\r\n                        .attr(\"r\", radius)\r\n                        .attr(\"cx\", proLocation[0])\r\n                        .attr(\"cy\", proLocation[1])\r\n                        .style(\"cursor\", \"pointer\")\r\n                        .on(\"mouseover\",function () {\r\n                            d3.select(this)\r\n                                .attr(\"stroke\",\"#449D44\");\r\n                            var tipsName = r.properties.name,\r\n                                tipsArray = [];\r\n                            tip.html(function(){\r\n                                for (var k = 0; k < data.length; k++) {\r\n                                    if (data[k][rowHeaderLength - 1].data == r.properties.name) {\r\n                                        for(var t = 0;t < columnHeaderLink.length;t++){\r\n                                            var saveHeader = [],\r\n                                                headerStr: any = [];\r\n                                            saveHeader.push(columnHeaderLink[t]);\r\n                                            saveHeader.push(data[k][t + rowHeaderLength].data);\r\n                                            headerStr = saveHeader.join(\" : \");\r\n                                            tipsArray.push(headerStr);\r\n                                        }\r\n                                        return tipsName+\" :</br>\"+tipsArray.join(\"</br>\");\r\n                                    }\r\n                                }\r\n                            });\r\n                            tip.show();\r\n                        })\r\n                        .on(\"mouseout\",function(){\r\n                            d3.select(this)\r\n                                .attr(\"stroke\",\"none\");\r\n                            tip.hide();\r\n                        })\r\n                }\r\n            }\r\n        });\r\n    };\r\n}"]}