{"version":3,"sources":["src/chart/chartChinaMap.service.ts"],"names":[],"mappings":";;;AAAA,sCAA2C;AAC3C,oFAAkF;AAClF,IAAI,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AAIjC;IACI,8BACY,0BAAsD;QAAtD,+BAA0B,GAA1B,0BAA0B,CAA4B;IAC/D,CAAC;IAEG,qCAAM,GAAb,UAAc,YAAY,EAAE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAC,KAAK;QACpD,IAAI,MAAM,IAAI,IAAI,EAAE;YAChB,YAAY,CAAC,IAAI,CAAC,iEAAiE,CAAC,CAAC;YACrF,OAAO;SACV;QACD,IAAI,MAAM,CAAC;QACX,KAAK,CAAC,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;QAC5C,OAAO,IAAI,CAAC,0BAA0B,CAAC,mBAAmB,CAAC,YAAY,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC,KAAK,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;IAC3H,CAAC;IAAA,CAAC;IAEK,0CAAW,GAAlB,UAAmB,IAAI;QACnB,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC;QAC1B,IAAI,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC;QAC9B,IAAI,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;QACnC,IAAI,IAAI,GAAG,OAAO,CAAC;QACnB,IAAI,WAAW,CAAC,IAAI,IAAI,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE;YAC3C,IAAI,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC;SAChC;aAAM,IAAI,WAAW,CAAC,QAAQ,IAAI,WAAW,CAAC,QAAQ,CAAC,IAAI,EAAE;YAC1D,IAAI,GAAG,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC;SACpC;QAED,IAAI,GAAG,CAAC;QACR,IAAI,IAAI,IAAI,OAAO,EAAE;YACjB,GAAG,GAAG,2CAA2C,CAAA;SACpD;aAAM,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;YACxB,GAAG,GAAG,iDAAiD,GAAG,IAAI,GAAG,OAAO,CAAC;SAC5E;aAAM;YACH,GAAG,GAAG,kDAAkD,GAAG,IAAI,GAAG,OAAO,CAAC;SAC7E;QAED,IAAI,QAAQ,CAAC;QACb,IAAI,KAAK,CAAC;QACV,IAAI,KAAK,CAAC;QACV,IAAI,MAAM,CAAC;QACX,IAAI,GAAG,CAAC;QACR,IAAI,GAAG,CAAC;QACR,IAAI,GAAG,CAAC;QACR,IAAI,GAAG,CAAC;QACR,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,IAAI,UAAU,CAAC;QACf,KAAI,IAAI,WAAW,IAAI,IAAI,CAAC,YAAY,EAAC;YAErC,IAAI,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC;YAEpD,eAAe;YACf,QAAQ,GAAG,IAAI,CAAC;YAChB,KAAK,GAAG,IAAI,CAAC;YACb,KAAK,GAAG,IAAI,CAAC;YACb,IAAG,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,EAAC;gBACzB,QAAQ,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC7B,KAAK,GAAG,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACtC,KAAK,GAAG,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aACzC;iBAAK,IAAG,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,EAAC;gBAChC,QAAQ,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC7B,KAAK,GAAG,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpD,KAAK,GAAG,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aACvD;YAED,sBAAsB;YACtB,QAAQ,SAAS,EAAC;gBACd,KAAK,UAAU;oBACX,IAAI,QAAQ,GAAG,EAAE,CAAC;oBAClB,IAAG,KAAK,IAAI,KAAK,EAAC;wBACd,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAC;4BACrD,MAAM,GAAG,IAAI,CAAC;4BACd,GAAG,GAAG,IAAI,CAAC;4BACX,GAAG,GAAG,IAAI,CAAC;4BACX,IAAG,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,EAAC;gCACvB,MAAM,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gCACzB,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gCAClC,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;6BACrC;iCAAK,IAAG,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,EAAC;gCAC9B,MAAM,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gCACzB,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gCAChD,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;6BACnD;4BAED,IAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,IAAI,GAAG,EAAC;gCAC7B,QAAQ,CAAC,IAAI,CAAC,EAAC,QAAQ,EAAE,QAAQ;oCAC7B,MAAM,EAAE,MAAM;oCACd,MAAM,EAAE,CAAC,CAAC,KAAK,EAAC,KAAK,CAAC;wCAClB,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;iCAClB,CAAC,CAAC;gCAEH,IAAG,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC;oCACjD,GAAG,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;iCAC1C;gCACD,IAAG,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC;oCACjD,GAAG,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;iCAC1C;6BACJ;yBACJ;wBAED,IAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAC;4BACnB,UAAU,CAAC,IAAI,CACX;gCACI,IAAI,EAAC,QAAQ;gCACb,IAAI,EAAE,OAAO;gCACb,gBAAgB,EAAE,KAAK;gCACvB,MAAM,EAAE,CAAC,MAAM,EAAE,OAAO,CAAC;gCACzB,UAAU,EAAE,CAAC;gCACb,MAAM,EAAE;oCACJ,IAAI,EAAE,IAAI;oCACV,MAAM,EAAE,CAAC;oCACT,WAAW,EAAE,CAAC;oCACd,MAAM,EAAE,OAAO;oCACf,UAAU,EAAE,CAAC;iCAChB;gCACD,SAAS,EAAE;oCACP,MAAM,EAAE;wCACJ,KAAK,EAAE,CAAC;wCACR,OAAO,EAAE,GAAG;wCACZ,SAAS,EAAE,GAAG;qCACjB;iCACJ;gCACD,IAAI,EAAE,QAAQ;6BACjB,CACJ,CAAC;4BACF,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;yBAC7B;qBACJ;oBACD,MAAM;gBAEV,KAAK,MAAM;oBACP,IAAI,WAAW,GAAG,EAAE,CAAC;oBACrB,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAC;wBACrD,MAAM,GAAG,IAAI,CAAC;wBACd,GAAG,GAAG,IAAI,CAAC;wBACX,GAAG,GAAG,IAAI,CAAC;wBACX,IAAG,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,EAAC;4BACvB,MAAM,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;4BACzB,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;4BAClC,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;yBACrC;6BAAK,IAAG,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,EAAC;4BAC9B,MAAM,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;4BACzB,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;4BAChD,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;yBACnD;wBAED,IAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC;4BACf,WAAW,CAAC,IAAI,CAAC,CAAC,GAAG,EAAC,GAAG,EAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;4BAExD,IAAG,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC;gCACjD,GAAG,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;6BAC1C;4BACD,IAAG,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC;gCACjD,GAAG,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;6BAC1C;yBACJ;qBACJ;oBAED,IAAG,WAAW,CAAC,MAAM,GAAG,CAAC,EAAC;wBACtB,UAAU,CAAC,IAAI,CACX;4BACI,IAAI,EAAE,WAAW;4BACjB,IAAI,EAAE,SAAS;4BACf,OAAO,EAAE,IAAI;4BACb,gBAAgB,EAAE,KAAK;4BACvB,IAAI,EAAE,WAAW;yBACpB,CACJ,CAAC;wBACF,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;qBAChC;oBACD,MAAM;gBAEV,KAAK,SAAS;oBACV,IAAI,WAAW,GAAG,EAAE,CAAC;oBACrB,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAC;wBACrD,MAAM,GAAG,IAAI,CAAC;wBACd,GAAG,GAAG,IAAI,CAAC;wBACX,GAAG,GAAG,IAAI,CAAC;wBACX,IAAG,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,EAAC;4BACvB,MAAM,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;4BACzB,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;4BAClC,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;yBACrC;6BAAK,IAAG,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,EAAC;4BAC9B,MAAM,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;4BACzB,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;4BAChD,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;yBACnD;wBAED,IAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC;4BACf,WAAW,CAAC,IAAI,CAAC;gCACb,IAAI,EAAC,MAAM;gCACX,KAAK,EAAC,CAAC,GAAG,EAAC,GAAG,EAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;6BAC9C,CAAC,CAAC;4BACH,IAAG,UAAU,IAAI,IAAI,IAAI,UAAU,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC;gCAC9D,UAAU,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;6BAC5C;4BAED,IAAG,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC;gCACjD,GAAG,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;6BAC1C;4BACD,IAAG,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC;gCACjD,GAAG,GAAG,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;6BAC1C;yBACJ;qBACJ;oBAED,IAAG,WAAW,CAAC,MAAM,GAAG,CAAC,EAAC;wBACtB,UAAU,CAAC,IAAI,CACX;4BACI,IAAI,EAAE,WAAW;4BACjB,IAAI,EAAE,SAAS;4BACf,gBAAgB,EAAE,KAAK;4BACvB,IAAI,EAAE,WAAW;4BACjB,UAAU,EAAG,UAAU,GAAG;gCACtB,OAAO,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,UAAU,CAAC;4BACpC,CAAC;4BACD,KAAK,EAAE;gCACH,MAAM,EAAE;oCACJ,SAAS,EAAE,KAAK;oCAChB,QAAQ,EAAE,OAAO;oCACjB,IAAI,EAAE,KAAK;iCACd;gCACD,QAAQ,EAAE;oCACN,IAAI,EAAE,IAAI;iCACb;6BACJ;yBACJ,CACJ,CAAC;wBACF,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;qBAChC;aACR;YACD,CAAC,EAAE,CAAC;SACP;QAED,IAAI,SAAS,CAAC;QAEd,CAAC,CAAC,IAAI,CAAC;YACH,IAAI,EAAE,KAAK;YACX,GAAG,EAAE,GAAG;YACR,KAAK,EAAE,KAAK;YACZ,cAAc;YACd,OAAO,EAAE,UAAU,QAAQ;gBACvB,OAAO,CAAC,WAAW,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;gBACpC,SAAS,GAAG;oBACR,MAAM,EAAE;wBACJ,MAAM,EAAE,UAAU;wBAClB,GAAG,EAAE,KAAK;wBACV,IAAI,EAAE,MAAM;wBACZ,YAAY,EAAE,UAAU;wBACxB,IAAI,EAAE,UAAU;qBACnB;oBACD,SAAS,EAAE;wBACP,GAAG,EAAE,GAAG;wBACR,GAAG,EAAE,GAAG;wBACR,IAAI,EAAE,OAAO;wBACb,GAAG,EAAE,QAAQ;wBACb,wBAAwB;wBACxB,OAAO,EAAE;4BACL,KAAK,EAAE,CAAC,SAAS,EAAC,SAAS,EAAC,SAAS,CAAC,CAAC,OAAO,EAAE;yBACnD;wBACD,UAAU,EAAG,IAAI;wBACjB,SAAS,EAAE;4BACP,KAAK,EAAE,SAAS;yBACnB;qBACJ;oBACD,GAAG,EAAE;wBACD,GAAG,EAAE,IAAI;wBACT,KAAK,EAAE;4BACH,QAAQ,EAAE;gCACN,IAAI,EAAE,KAAK;6BACd;yBACJ;wBACD,SAAS,EAAE;4BACP,MAAM,EAAE;gCACJ,SAAS,EAAE,SAAS;gCACpB,WAAW,EAAE,SAAS;gCACtB,WAAW,EAAE,CAAC;6BACjB;yBACJ;qBACJ;oBACD,OAAO,EAAE;wBACL,OAAO,EAAE,MAAM;qBAClB;oBACD,MAAM,EAAC,UAAU;iBACpB,CAAC;YACN,CAAC;SACJ,CAAC,CAAC;QAEH,OAAO,SAAS,CAAC;IACrB,CAAC;IAAA,CAAC;IAjSO,oBAAoB;QAFhC,iBAAU,EAAE;iDAI+B,wDAA0B;OAFzD,oBAAoB,CAkShC;IAAD,2BAAC;CAlSD,AAkSC,IAAA;AAlSY,oDAAoB","file":"../../../src/chart/chartChinaMap.service.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { CBoardHeatMapRenderService } from './render/cBoardHeatMapRender.service';\r\nvar echarts = require('echarts');\r\n\r\n@Injectable()\r\n\r\nexport class ChartChinaMapService {\r\n    constructor(\r\n        private cBoardHeatMapRenderService: CBoardHeatMapRenderService\r\n    ) {}\r\n\r\n    public render(containerDom, option, scope, persist,drill) {\r\n        if (option == null) {\r\n            containerDom.html(\"<div class=\\\"alert alert-danger\\\" role=\\\"alert\\\">No Data!</div>\");\r\n            return;\r\n        }\r\n        var height;\r\n        scope ? height = scope.myheight - 20 : null;\r\n        return this.cBoardHeatMapRenderService.cBoardHeatMapRender(containerDom, option, null, echarts).chart(height, persist);\r\n    };\r\n\r\n    public parseOption(data) {\r\n        var optionData = [];\r\n        var seriesData = [];\r\n        var data_keys = data.keys;\r\n        var data_series = data.series;\r\n        var chartConfig = data.chartConfig;\r\n        var code = 'china';\r\n        if (chartConfig.city && chartConfig.city.code) {\r\n            code = chartConfig.city.code;\r\n        } else if (chartConfig.province && chartConfig.province.code) {\r\n            code = chartConfig.province.code;\r\n        }\r\n\r\n        var url;\r\n        if (code == 'china') {\r\n            url = 'assets/plugins/FineMap/mapdata/china.json'\r\n        } else if (code.length > 2) {\r\n            url = 'assets/plugins/FineMap/mapdata/geometryCouties/' + code + '.json';\r\n        } else {\r\n            url = 'assets/plugins/FineMap/mapdata/geometryProvince/' + code + '.json';\r\n        }\r\n\r\n        var fromName;\r\n        var fromN;\r\n        var fromL;\r\n        var toName;\r\n        var toN;\r\n        var toL;\r\n        var max;\r\n        var min;\r\n        var j = 0;\r\n        var maxScatter;\r\n        for(var serieConfig in data.seriesConfig){\r\n\r\n            var serieType = data.seriesConfig[serieConfig].type;\r\n\r\n            //重置为null，防止脏数据\r\n            fromName = null;\r\n            fromN = null;\r\n            fromL = null;\r\n            if(data_series[j].length > 3){\r\n                fromName = data_series[j][2];\r\n                fromN = parseFloat(data_series[j][0]);\r\n                fromL = parseFloat(data_series[j][1]);\r\n            }else if(data_series[j].length == 3){\r\n                fromName = data_series[j][1];\r\n                fromN = parseFloat(data_series[j][0].split(\",\")[0]);\r\n                fromL = parseFloat(data_series[j][0].split(\",\")[1]);\r\n            }\r\n\r\n            //根据不同的地图类型获取不同的series\r\n            switch (serieType){\r\n                case \"markLine\" :\r\n                    var lineData = [];\r\n                    if(fromN && fromL){\r\n                        for(var i = 0; data_keys[0] && i < data_keys.length; i++){\r\n                            toName = null;\r\n                            toN = null;\r\n                            toL = null;\r\n                            if(data_keys[i].length > 2){\r\n                                toName = data_keys[i][2];\r\n                                toN = parseFloat(data_keys[i][0]);\r\n                                toL = parseFloat(data_keys[i][1]);\r\n                            }else if(data_keys[i].length == 2){\r\n                                toName = data_keys[i][1];\r\n                                toN = parseFloat(data_keys[i][0].split(\",\")[0]);\r\n                                toL = parseFloat(data_keys[i][0].split(\",\")[1]);\r\n                            }\r\n\r\n                            if(data.data[j][i] && toN && toL){\r\n                                lineData.push({fromName: fromName,\r\n                                    toName: toName,\r\n                                    coords: [[fromN,fromL],\r\n                                        [toN, toL]]\r\n                                });\r\n\r\n                                if(max == null || max <= parseFloat(data.data[j][i])){\r\n                                    max = parseFloat(data.data[j][i]) + 10;\r\n                                }\r\n                                if(min == null || min >= parseFloat(data.data[j][i])){\r\n                                    min = parseFloat(data.data[j][i]) - 10;\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        if(lineData.length > 0){\r\n                            seriesData.push(\r\n                                {\r\n                                    name:fromName,\r\n                                    type: 'lines',\r\n                                    coordinateSystem: 'geo',\r\n                                    symbol: ['none', 'arrow'],\r\n                                    symbolSize: 6,\r\n                                    effect: {\r\n                                        show: true,\r\n                                        period: 6,\r\n                                        trailLength: 0,\r\n                                        symbol: 'arrow',\r\n                                        symbolSize: 4\r\n                                    },\r\n                                    lineStyle: {\r\n                                        normal: {\r\n                                            width: 1,\r\n                                            opacity: 0.6,\r\n                                            curveness: 0.2\r\n                                        }\r\n                                    },\r\n                                    data: lineData\r\n                                }\r\n                            );\r\n                            optionData.push(fromName);\r\n                        }\r\n                    }\r\n                    break;\r\n\r\n                case \"heat\" :\r\n                    var heatmapData = [];\r\n                    for(var i = 0; data_keys[0] && i < data_keys.length; i++){\r\n                        toName = null;\r\n                        toN = null;\r\n                        toL = null;\r\n                        if(data_keys[i].length > 2){\r\n                            toName = data_keys[i][2];\r\n                            toN = parseFloat(data_keys[i][0]);\r\n                            toL = parseFloat(data_keys[i][1]);\r\n                        }else if(data_keys[i].length == 2){\r\n                            toName = data_keys[i][1];\r\n                            toN = parseFloat(data_keys[i][0].split(\",\")[0]);\r\n                            toL = parseFloat(data_keys[i][0].split(\",\")[1]);\r\n                        }\r\n\r\n                        if(data.data[j][i]){\r\n                            heatmapData.push([toN,toL,parseFloat(data.data[j][i])]);\r\n\r\n                            if(max == null || max <= parseFloat(data.data[j][i])){\r\n                                max = parseFloat(data.data[j][i]) + 10;\r\n                            }\r\n                            if(min == null || min >= parseFloat(data.data[j][i])){\r\n                                min = parseFloat(data.data[j][i]) - 10;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if(heatmapData.length > 0){\r\n                        seriesData.push(\r\n                            {\r\n                                name: serieConfig,\r\n                                type: 'heatmap',\r\n                                mapType: code,\r\n                                coordinateSystem: 'geo',\r\n                                data: heatmapData\r\n                            }\r\n                        );\r\n                        optionData.push(serieConfig);\r\n                    }\r\n                    break;\r\n\r\n                case \"scatter\" :\r\n                    var scatterData = [];\r\n                    for(var i = 0; data_keys[0] && i < data_keys.length; i++){\r\n                        toName = null;\r\n                        toN = null;\r\n                        toL = null;\r\n                        if(data_keys[i].length > 2){\r\n                            toName = data_keys[i][2];\r\n                            toN = parseFloat(data_keys[i][0]);\r\n                            toL = parseFloat(data_keys[i][1]);\r\n                        }else if(data_keys[i].length == 2){\r\n                            toName = data_keys[i][1];\r\n                            toN = parseFloat(data_keys[i][0].split(\",\")[0]);\r\n                            toL = parseFloat(data_keys[i][0].split(\",\")[1]);\r\n                        }\r\n\r\n                        if(data.data[j][i]){\r\n                            scatterData.push({\r\n                                name:toName,\r\n                                value:[toN,toL,parseFloat(data.data[j][i])]\r\n                            });\r\n                            if(maxScatter == null || maxScatter < parseFloat(data.data[j][i])){\r\n                                maxScatter = parseFloat(data.data[j][i]);\r\n                            }\r\n\r\n                            if(max == null || max <= parseFloat(data.data[j][i])){\r\n                                max = parseFloat(data.data[j][i]) + 10;\r\n                            }\r\n                            if(min == null || min >= parseFloat(data.data[j][i])){\r\n                                min = parseFloat(data.data[j][i]) - 10;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if(scatterData.length > 0){\r\n                        seriesData.push(\r\n                            {\r\n                                name: serieConfig,\r\n                                type: 'scatter',\r\n                                coordinateSystem: 'geo',\r\n                                data: scatterData,\r\n                                symbolSize : function (val) {\r\n                                    return val[2] * 30 / maxScatter;\r\n                                },\r\n                                label: {\r\n                                    normal: {\r\n                                        formatter: '{b}',\r\n                                        position: 'right',\r\n                                        show: false\r\n                                    },\r\n                                    emphasis: {\r\n                                        show: true\r\n                                    }\r\n                                }\r\n                            }\r\n                        );\r\n                        optionData.push(serieConfig);\r\n                    }\r\n            }\r\n            j++;\r\n        }\r\n\r\n        var mapOption;\r\n\r\n        $.ajax({\r\n            type: \"get\",\r\n            url: url,\r\n            async: false,\r\n            //type:'json',\r\n            success: function (cityJson) {\r\n                echarts.registerMap(code, cityJson);\r\n                mapOption = {\r\n                    legend: {\r\n                        orient: 'vertical',\r\n                        top: 'top',\r\n                        left: 'left',\r\n                        selectedMode: 'multiple',\r\n                        data: optionData\r\n                    },\r\n                    visualMap: {\r\n                        min: min,\r\n                        max: max,\r\n                        left: 'right',\r\n                        top: 'bottom',\r\n                        //text: ['High', 'Low'],\r\n                        inRange: {\r\n                            color: ['#d94e5d','#eac736','#50a3ba'].reverse()\r\n                        },\r\n                        calculable : true,\r\n                        textStyle: {\r\n                            color: '#d94e5d'\r\n                        }\r\n                    },\r\n                    geo: {\r\n                        map: code,\r\n                        label: {\r\n                            emphasis: {\r\n                                show: false\r\n                            }\r\n                        },\r\n                        itemStyle: {\r\n                            normal: {\r\n                                areaColor: '#EFF0F0',\r\n                                borderColor: '#B5B5B5',\r\n                                borderWidth: 1\r\n                            }\r\n                        }\r\n                    },\r\n                    tooltip: {\r\n                        trigger: 'item'\r\n                    },\r\n                    series:seriesData\r\n                };\r\n            }\r\n        });\r\n\r\n        return mapOption;\r\n    };\r\n}"]}