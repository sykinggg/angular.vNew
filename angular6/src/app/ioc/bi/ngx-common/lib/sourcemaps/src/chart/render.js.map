{"version":3,"sources":["src/chart/render.ts"],"names":[],"mappings":"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","file":"../../../src/chart/render.js","sourcesContent":["import { CHART_BASIC_OPTION } from './chart-options';\r\nimport * as _ from 'lodash';\r\nimport * as $ from 'jquery';\r\n\r\nvar echarts = require('echarts');\r\n\r\nexport class Render {\r\n    container;\r\n    ecc;\r\n    isDeppSpec;\r\n    options;\r\n    theme = 'theme-fin1';\r\n\r\n    constructor(jqContainer, options, isDeepSpec?) {\r\n        this.container = jqContainer; // jquery object\r\n        this.ecc = echarts.init(jqContainer.get(0), this.theme);\r\n        this.isDeppSpec = isDeepSpec;\r\n        this.options = options;\r\n    }\r\n\r\n\r\n    chart(group, persist) {\r\n        var self = this;\r\n        var options = this.isDeppSpec == true ? self.options : $.extend(true, {}, CHART_BASIC_OPTION, self.options);\r\n        if (options.visualMap != undefined) {\r\n            $(this.container).css({\r\n                height: 500 + \"px\",\r\n                width: '100%'\r\n            });\r\n        }\r\n        if (options.legend && options.legend.data && options.legend.data.length > 35) {\r\n            options.grid.top = '5%';\r\n            options.legend.show =false;\r\n        }\r\n        if(persist){\r\n            options.animation = false;\r\n        }\r\n        self.ecc.setOption(options);\r\n        self.changeSize(self.ecc);\r\n        self.container.resize(function (e) {\r\n            self.ecc.resize();\r\n            self.changeSize(self.ecc);\r\n        }); // 图表大小自适应\r\n        if (group) {\r\n            self.ecc.group = group;\r\n            echarts.connect(group);\r\n        }\r\n        if (persist) {\r\n            setTimeout(function () {\r\n                persist.data = self.ecc.getDataURL({\r\n                    type: 'jpeg',\r\n                    pixelRatio: 2,\r\n                    backgroundColor: '#fff'\r\n                });\r\n                persist.type = \"jpg\";\r\n                persist.widgetType = \"echarts\";\r\n            }, 1000);\r\n        }\r\n        return function (o) {\r\n            o = $.extend(true, {}, CHART_BASIC_OPTION, o);\r\n            self.ecc.setOption(o, true);\r\n        }\r\n    };\r\n\r\n    changeSize(instance) {\r\n        var o = instance.getOption();\r\n        if ((o.series[0] ? o.series[0].type : null) == 'pie') {\r\n            var l = o.series.length;\r\n            var b = instance.getWidth() / (l + 1 + l * 8)\r\n            for (var i = 0; i < l; i++) {\r\n                var seriesType = o.series[i] ? o.series[i].realType : null;\r\n                if ((b * 8) < (instance.getHeight() * 0.75)) {\r\n                    if (seriesType == 'doughnut') {\r\n                        o.series[i].radius = [b * 3, b * 4];\r\n                    } else if (seriesType == 'coxcomb') {\r\n                        o.series[i].radius = [b * 0.8, b * 4];\r\n                    } else {\r\n                        o.series[i].radius = [0, b * 4];\r\n                    }\r\n\r\n                } else {\r\n                    if (seriesType == 'doughnut') {\r\n                        o.series[i].radius = ['50%', '75%'];\r\n                    } else if (seriesType == 'coxcomb') {\r\n                        o.series[i].radius = ['15%', '75%']\r\n                    } else {\r\n                        o.series[i].radius = ['0', '75%'];\r\n                    }\r\n                }\r\n            }\r\n            instance.setOption(o);\r\n        }\r\n\r\n    };\r\n\r\n    addClick(chartConfig, relations, $state) {\r\n        if(!chartConfig || !relations){\r\n            return;\r\n        }\r\n        var self = this;\r\n        self.ecc.on('click', function (param){\r\n            var sourceField = relations.sourceField;\r\n            var links = relations.relations;\r\n            //[{\"targetId\":relation.targetId, params:[{\"targetField\":targetField,\"value\":param.name},{}]}]\r\n            var relations_old = JSON.parse($(\"#relations\").val() + '');\r\n            var relations_new = [];\r\n            _.each(relations_old, function (relation_old) { //删除已存在的\r\n                var exists = false;\r\n                _.each(links, function(relation){\r\n                    if(relation_old.targetId = relation.targetId){\r\n                        exists = true;\r\n                        return;\r\n                    }\r\n                })\r\n                if(!exists){\r\n                    relations_new.push(relation_old);\r\n                }\r\n            });\r\n\r\n            var groups = _.map(chartConfig.groups, function(group, index){\r\n                return {\"index\":index, \"name\":group.col};\r\n            });\r\n            var keys = _.map(chartConfig.keys, function(key, index){\r\n            return {\"index\":index, \"name\":key.col};\r\n            });\r\n\r\n            var paramValues = [];\r\n\r\n            switch (chartConfig.chart_type) {\r\n                case 'line':\r\n                case 'contrast':\r\n                case 'scatter':\r\n                case 'pie':\r\n                    _.each(sourceField, function (field) {\r\n                        if ($.inArray(field, _.map(groups, function (group) {\r\n                                return group.name\r\n                            })) != -1\r\n                            || $.inArray(field, _.map(keys, function (key) {\r\n                                return key.name\r\n                            })) != -1\r\n                        ) {\r\n                            _.each(groups, function (group) {\r\n                                if (group.name == field) {\r\n                                    paramValues.push(param.seriesName.split(\"-\")[group.index]);\r\n                                }\r\n                            });\r\n                            _.each(keys, function (key) {\r\n                                if (key.name == field) {\r\n                                    paramValues.push(param.name.split(\"-\")[key.index]);\r\n                                }\r\n                            });\r\n                        } else {\r\n                            paramValues.push(\"noMatch\");\r\n                        }\r\n                    });\r\n                    break;\r\n\r\n                case 'funnel':\r\n                    _.each(sourceField, function(field){\r\n                        if($.inArray(field, _.map(keys, function(key){return key.name;}))!=-1 ){\r\n                            _.each(keys,function(key){\r\n                                if(key.name == field){\r\n                                    paramValues.push(param.seriesName.split(\"-\")[key.index]);\r\n                                }\r\n                            });\r\n                        }else{\r\n                            paramValues.push(\"noMatch\");\r\n                        }\r\n                    });\r\n                    break;\r\n\r\n                case 'sankey':\r\n                    if (param.dataType == 'edge') {\r\n                        _.each(sourceField, function (field) {\r\n                            if ($.inArray(field, _.map(keys, function (key) {\r\n                                    return key.name;\r\n                                })) != -1\r\n                                || $.inArray(field, _.map(groups, function (group) {\r\n                                    return group.name;\r\n                                })) != -1) {\r\n                                _.each(keys, function (key) {\r\n                                    if (key.name == field) {\r\n                                        paramValues.push(param.data.source.split(\"-\")[key.index]);\r\n                                    }\r\n                                });\r\n                                _.each(groups, function (group) {\r\n                                    if (group.name == field) {\r\n                                        paramValues.push(param.data.target.split(\"-\")[group.index]);\r\n                                    }\r\n                                });\r\n                            } else {\r\n                                paramValues.push(\"noMatch\");\r\n                            }\r\n                        });\r\n                    }\r\n                    break;\r\n\r\n                case 'radar':\r\n                    if(chartConfig.asRow){//雷达行维\r\n                        _.each(sourceField, function(field){\r\n                            if($.inArray(field, _.map(keys, function(key){return key.name;}))!=-1){\r\n                                _.each(keys,function(key){\r\n                                    if(key.name == field){\r\n                                        paramValues.push(param.name.split(\"-\")[key.index]);\r\n                                    }\r\n                                });\r\n                            }else{\r\n                                paramValues.push(\"noMatch\");\r\n                            }\r\n                        });\r\n                    }else{\r\n                        _.each(sourceField, function(field){\r\n                            if($.inArray(field, _.map(groups, function(group){return group.name;}))!=-1){\r\n                                _.each(groups,function(group){\r\n                                    if(group.name == field){\r\n                                        paramValues.push(param.name.split(\"-\")[group.index]);\r\n                                    }\r\n                                });\r\n                            }else{\r\n                                paramValues.push(\"noMatch\");\r\n                            }\r\n                        });\r\n                    }\r\n                    break;\r\n\r\n                case 'wordCloud':\r\n                    _.each(sourceField, function(field){\r\n                        if($.inArray(field, _.map(keys, function(key){return key.name;}))!=-1){\r\n                            _.each(keys,function(key){\r\n                                if(key.name == field){\r\n                                    paramValues.push(param.name.split(\"-\")[key.index]);\r\n                                }\r\n                            });\r\n                        }else{\r\n                            paramValues.push(\"noMatch\");\r\n                        }\r\n                    });\r\n                    break;\r\n\r\n                case 'treeMap':\r\n                    _.each(sourceField, function(field){\r\n                        if($.inArray(field, _.map(keys, function(key){return key.name.toUpperCase();}))!=-1){\r\n                            _.each(keys,function(key){\r\n                                if(key.name.toUpperCase() == field && param.treePathInfo[key.index+1]){\r\n                                    paramValues.push(param.treePathInfo[key.index+1].name);\r\n                                }\r\n                            });\r\n                        }else{\r\n                            paramValues.push(\"noMatch\");\r\n                        }\r\n                    });\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            _.each(links, function(relation){\r\n                var record: any = {};\r\n                record.targetId = relation.targetId;\r\n                record.params = [];\r\n                for(var i=0;i<relation.targetField.length;i++){\r\n                    var e: any = {};\r\n                    e.targetField = relation.targetField[i];\r\n                    e.value = paramValues[i];\r\n                    record.params.push(e);\r\n                }\r\n                record.params = _.filter(record.params, function(e){\r\n                    return e.value != \"noMatch\";\r\n                });\r\n                relations_new.push(record);\r\n            });\r\n\r\n            $(\"#relations\").val(JSON.stringify(relations_new));\r\n            //触发关联图表刷新\r\n            _.each(_.filter(links,function(e){return e.type==\"widget\"}), function(relation){\r\n                var button = document.getElementsByName(\"reload_\"+relation.targetId);\r\n                if(button && button.length > 0){\r\n                    button[button.length-1].click();\r\n                }\r\n            });\r\n\r\n            //触发弹出看板\r\n            _.each(_.filter(links,function(e){return e.type==\"board\"}), function(relation){\r\n                // var url = $state.href('mine.view', {id: relation.targetId});\r\n                // let navigationExtras: NavigationExtras = {\r\n                let navigationExtras: any = {\r\n                    queryParams: {\r\n                        id: relation.targetId\r\n                    }\r\n                };\r\n                let url = $state.navigate(['/admin/mine/view'], navigationExtras);\r\n                var param = JSON.stringify(_.find(relations_new, function(e){return e.targetId == relation.targetId}));\r\n                window.open(encodeURI(url+\"?\"+param), '_blank');\r\n            });\r\n        });\r\n    };\r\n}"]}