{"version":3,"sources":["src/widget/tree.component.ts"],"names":[],"mappings":"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","file":"../../../src/widget/tree.component.js","sourcesContent":["import { Component, Input, Output, EventEmitter, ComponentFactoryResolver, OnInit, ViewChild } from '@angular/core';\r\nimport { ITreeState, TreeComponent, TreeModel, TreeNode, ITreeOptions, KEYS } from 'angular-tree-component';\r\nimport { Router, ActivatedRoute, ParamMap, NavigationExtras } from '@angular/router';\r\nimport { TreeConfig } from 'app/shared/tree/tree-config';\r\nimport { TreeConfigService } from 'app/shared/tree/tree-config.service';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { ApiServer, DialogService } from 'core-services/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { REQUEST_OPTIONS } from 'app/shared/request-options';\r\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\r\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\r\n\r\nimport { DataService } from 'app/shared/data/data.service';\r\nimport { UpdateService } from 'app/shared/data/update.service';\r\n\r\nimport * as _ from 'lodash';\r\nimport { FormGroup } from '@angular/forms';\r\n\r\n@Component({\r\n    selector: 'widget-tree',\r\n    template: require('./tree.component.html!text')\r\n})\r\n\r\nexport class WidgetTreeComponent implements OnInit {\r\n\r\n    private requestOptions = REQUEST_OPTIONS;\r\n\r\n    constructor(\r\n        private treeService: TreeConfigService,\r\n        private router: Router,\r\n        private activeRouter: ActivatedRoute,\r\n        private apiServer: ApiServer,\r\n        private translate: TranslateService,\r\n        private dialogService: DialogService,\r\n        private dataService: DataService,\r\n        private updateService: UpdateService,\r\n    ) {}\r\n\r\n    @ViewChild('dataSetTree') tree: TreeComponent;\r\n    treeOptions: any = new TreeConfig();\r\n    searchObservable: Observable<any>;\r\n    customDs = false;\r\n\r\n    initializedTree() {\r\n        this.tree.treeModel.expandAll();\r\n    }\r\n\r\n    editNode(node?: TreeNode) {\r\n        console.log(node);\r\n        if(!node && !this.treeService.checkTreeNode('edit', this.tree)) {\r\n            return;\r\n        }\r\n        // if (!this.checkTreeNode(\"edit\")) return;\r\n        // var selectedNode = jstree_GetSelectedNodes(treeID)[0];\r\n        let selectedNode: any = node || this.tree.treeModel.getActiveNodes()[0];\r\n        let navigationExtras: NavigationExtras = {\r\n            queryParams: {\r\n                id: selectedNode.data.id,\r\n                notify: false,\r\n                inherit: false\r\n            }\r\n        };\r\n        this.router.navigate(['/admin/config/widget'], navigationExtras);\r\n        // $state.go('config.widget', {id: selectedNode.id}, {notify: false, inherit: false});\r\n        // this.editWgt(this.getSelectedWidget());\r\n        this.editWgt(this.getSelectedWidget(node));\r\n    };\r\n\r\n    doConfigParams = function () {\r\n        let self = this;\r\n        this.apiServer.get('config-params', {\r\n            type: this.datasource.type,\r\n            datasourceId: this.datasource.id,\r\n            page: 'widget.html'\r\n        },\r\n        this.requestOptions\r\n        ).subscribe(function (response) {\r\n            // self.params = response.data;\r\n            self.params = response;\r\n        });\r\n    };\r\n\r\n    editWgt(widget) {\r\n        let self = this;\r\n        this.apiServer.post(\"dashboard-checkWidget\", {id: widget.id}, this.requestOptions).subscribe(function (response: any) {\r\n            if (response.status == '1') {\r\n                self.doEditWgt(widget);\r\n                if (self.customDs == true) self.doConfigParams();\r\n            } else {\r\n                var d = widget.data.datasetId ? 'CONFIG.WIDGET.DATASET' : 'CONFIG.WIDGET.DATA_SOURCE';\r\n                self.dialogService.alert(\r\n                    self.translate.instant(\"ADMIN.CONTACT_ADMIN\") + \"：\" + self.translate.instant(d) + '/' + response.msg,\r\n                    \"modal-danger\"\r\n                );\r\n            }\r\n        });\r\n    };\r\n\r\n    viewQueryMoal;\r\n    cleanPreview() {\r\n        $('#preview_widget').html(\"\");\r\n        $('#viewQuery_widget').html(\"\");\r\n        this.viewQueryMoal = false;\r\n    };\r\n\r\n    datasourceList\r\n    curWidget: any = {};\r\n    widgetType;\r\n    doEditWgt(widget) {\r\n        let self: any = this;\r\n        this.cleanPreview();\r\n        // setTimeout(function () {\r\n        //     this.switchNode(widget.id)\r\n        // }, 500);\r\n        // this.switchNode(widget.id);\r\n        $('#preview_widget').html('');\r\n        this.curWidget = _.clone(widget.data);\r\n        if(this.curWidget.config.chart_type == 'kpi') {\r\n            self.changeChart('kpi');\r\n        }\r\n        if (!this.curWidget.expressions) {\r\n            this.curWidget.expressions = [];\r\n        }\r\n        if (!this.curWidget.filterGroups) {\r\n            this.curWidget.filterGroups = [];\r\n        }\r\n        this.updateService.updateConfig(this.curWidget.config);\r\n        this.datasource = _.find(this.datasourceList, function (ds) {\r\n            return ds.id == widget.data.datasource;\r\n        });\r\n    \r\n        this.widgetName = _.clone(widget.categoryName + \"/\" + widget.name);\r\n\r\n        if(widget&&widget.data&&widget.data.widgetType) {\r\n            this.widgetType = _.clone(widget.data.widgetType);\r\n        }else{\r\n            this.widgetType = 'detail';\r\n        }\r\n    \r\n        this.widgetId = widget.id;\r\n        this.optFlag = 'edit';\r\n        this.customDs = _.isUndefined(this.curWidget.datasetId);\r\n        this.loadDataset(function () {\r\n            self.loadDsExpressions();\r\n            self.loadDsFilterGroups();\r\n            self.buildSchema();\r\n            self.dataService.linkDataset(self.curWidget.datasetId, self.curWidget.config);\r\n        });\r\n        this.addWatch();\r\n    };\r\n\r\n    widgetList;\r\n    getWidgetList(callback?) {\r\n        let self = this;\r\n        this.apiServer.get(\"dashboard-widgets\", null, this.requestOptions).subscribe(function (response) {\r\n            self.widgetList = response;\r\n            if (callback) {\r\n                callback();\r\n            }\r\n            self.searchNode();\r\n        });\r\n    };\r\n\r\n    keywords;\r\n    originalData = [];\r\n    searchNode() {\r\n        let self = this;\r\n        var para = {wgtName: '', dsName: '', dsrName: ''};\r\n    \r\n        //map widgetList to list (add datasetName and datasourceName)\r\n        if(!this.widgetList) {\r\n            return;\r\n        }\r\n        var list = this.widgetList.map(function (w) {\r\n            var ds = _.find(self.datasetList, function (obj) {\r\n                return obj.id == w.data.datasetId\r\n            });\r\n            var dsrName = '';\r\n            var dsr;\r\n            if (ds) {\r\n                dsr = _.find(self.datasourceList, function (obj) {\r\n                    return obj.id == ds.data.datasource\r\n                });\r\n            } else if (w.data.datasource) {\r\n                dsr = _.find(self.datasourceList, function (obj) {\r\n                    return obj.id == w.data.datasource\r\n                });\r\n            }\r\n            return {\r\n                \"id\": w.id,\r\n                \"name\": w.name,\r\n                \"categoryName\": w.categoryName,\r\n                \"datasetName\": ds ? ds.name : '',\r\n                \"datasourceName\": dsr ? dsr.name : dsrName\r\n            };\r\n        });\r\n    \r\n        //split search keywords\r\n        if (this.keywords) {\r\n            if (this.keywords.indexOf(' ') == -1 && this.keywords.indexOf(':') == -1) {\r\n                para.wgtName = this.keywords;\r\n            } else {\r\n                var keys = this.keywords.split(' ');\r\n                for (var i = 0; i < keys.length; i++) {\r\n                    var w = keys[i].trim();\r\n                    if (w.split(':')[0] == 'wg') {\r\n                        para[\"wgtName\"] = w.split(':')[1];\r\n                    }\r\n                    if (w.split(':')[0] == 'ds') {\r\n                        para[\"dsName\"] = w.split(':')[1];\r\n                    }\r\n                    if (w.split(':')[0] == 'dsr') {\r\n                        para[\"dsrName\"] = w.split(':')[1];\r\n                    }\r\n                }\r\n            }\r\n            // item.name.indexOf(para.dsName)>-1 && item.name.indexOf(para.wgtName)>-1 && item.datasourceName.indexOf(para.dsrName)>-1;\r\n            this.originalData = this.treeService.buildTree(list.filter((item: any) => {\r\n                return item.name.indexOf(para.dsName)>-1 && item.name.indexOf(para.wgtName)>-1 && item.datasourceName.indexOf(para.dsrName)>-1;\r\n            }));\r\n        }else{\r\n            this.originalData = this.treeService.buildTree(list);\r\n        }\r\n\r\n        setTimeout(() => {\r\n            if (this.tree && this.tree.treeModel) {\r\n                this.tree.treeModel.update();\r\n                this.tree.treeModel.expandAll();\r\n            }\r\n        }, 500)\r\n        \r\n        //filter data by keywords\r\n        // originalData = jstree_CvtVPath2TreeData(\r\n        //     $filter('filter')(list, {name: para.wgtName, datasetName: para.dsName, datasourceName: para.dsrName})\r\n        // );\r\n    \r\n        // jstree_ReloadTree(treeID, originalData);\r\n    };\r\n\r\n    loadDatasource() {\r\n        let self = this;\r\n        this.apiServer.get(\"sources\", null, this.requestOptions).subscribe(function (response) {\r\n            self.datasourceList = response;\r\n            self.getCategoryList();\r\n            self.getWidgetList(function () {\r\n                if (self.activeRouter.snapshot.queryParams.id) {\r\n                    self.editWgt(_.find(self.widgetList, function (w) {\r\n                        return w.id == self.activeRouter.snapshot.queryParams.id;\r\n                    }));\r\n                } else if (self.activeRouter.snapshot.queryParams.id == null && self.activeRouter.snapshot.queryParams.datasetId) {\r\n                    self.newWgt({datasetId: parseInt(self.activeRouter.snapshot.queryParams.datasetId)});\r\n                    self.loadData();\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    datasetFormGroup: FormGroup;\r\n    toChartDisabled = true;\r\n    filterSelect = {};\r\n    loadData() {\r\n        let self = this;\r\n        this.curWidget.query = this.datasetFormGroup.value;\r\n        this.toChartDisabled = false;\r\n        this.newConfig();\r\n        this.filterSelect = {};\r\n        this.loadDataset(function () {\r\n            self.curWidget.expressions = [];\r\n            self.loadDsExpressions();\r\n            self.curWidget.filterGroups = [];\r\n            self.loadDsFilterGroups();\r\n            self.buildSchema();\r\n        });\r\n        this.cleanPreview();\r\n    };\r\n\r\n    dataset;\r\n    datasetList;\r\n    schema;\r\n    alerts\r\n    loading = false;\r\n    datasource;\r\n    loadFromCache = true;\r\n    buildSchema() {\r\n        let self = this;\r\n        var loadFromDataset = false;\r\n        if (!this.customDs) {\r\n            this.dataset = _.find(this.datasetList, function (ds) {\r\n                return ds.id == self.curWidget.datasetId;\r\n            });\r\n            if (self.dataset.data.schema && (self.dataset.data.schema.measure.length > 0 || self.dataset.data.schema.dimension.length > 0)) {\r\n                loadFromDataset = true;\r\n            }\r\n        }\r\n        if (loadFromDataset) {\r\n            this.schema = this.dataset.data.schema;\r\n            this.alerts = [];\r\n            this.switchLiteMode(true);\r\n        } else {\r\n            this.loading = true;\r\n            this.dataService.getColumns({\r\n                datasource: this.datasource ? this.datasource.id : null,\r\n                query: this.curWidget.query,\r\n                datasetId: this.customDs ? undefined : this.curWidget.datasetId,\r\n                reload: !this.loadFromCache,\r\n                callback: function (dps) {\r\n                    self.loading = false;\r\n                    self.alerts = [];\r\n                    if (dps.msg == \"1\") {\r\n                        self.schema = {selects: []};\r\n                        _.each(dps.columns, function (e) {\r\n                            self.schema.selects.push({column: e});\r\n                        });\r\n                        self.switchLiteMode(true);\r\n                    } else {\r\n                        self.alerts = [{msg: dps.msg, type: 'danger'}];\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    switchLiteMode = function (mode) {\r\n        if (mode) {\r\n            this.liteMode = mode;\r\n            // $parent.$parent.liteMode = mode;\r\n        } else {\r\n            this.liteMode = !this.liteMode;\r\n            // $parent.$parent.liteMode = liteMode;\r\n        }\r\n    }\r\n\r\n    loadDsFilterGroups() {\r\n        let self = this;\r\n        if (!this.customDs) {\r\n            var fg = _.find(this.datasetList, function (ds) {\r\n                return ds.id == self.curWidget.datasetId;\r\n            }).data.filters;\r\n            if (fg) {\r\n                _.each(fg, function (e) {\r\n                    self.curWidget.filterGroups.push(e);\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    loadDsExpressions() {\r\n        let self = this;\r\n        if (!this.customDs && this.datasetList) {\r\n            let dataset = _.find(this.datasetList, function (ds) {\r\n                return ds.id == self.curWidget.datasetId;\r\n            })\r\n            var dsExp;\r\n            if(dataset.data && dataset.data.expressions) {\r\n                dsExp = dataset.data.expressions;\r\n            }\r\n            if (dsExp) {\r\n                _.each(dsExp, function (e) {\r\n                    self.curWidget.expressions.push(e);\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    loadDataset(callback?) {\r\n        let self = this;\r\n        this.apiServer.get(\"datasets\", null, this.requestOptions).subscribe(function (response) {\r\n            self.datasetList = response;\r\n            if (callback) {\r\n                callback();\r\n            }\r\n        });\r\n    };\r\n\r\n    columns;\r\n    newConfig() {\r\n        this.curWidget.config = {};\r\n        this.curWidget.config.option = {};\r\n        this.curWidget.config.chart_type = 'table';\r\n        this.cleanPreview();\r\n        this.curWidget.config.selects = _.clone(this.columns);\r\n        this.curWidget.config.keys = [];\r\n        this.curWidget.config.groups = [];\r\n        this.curWidget.config.values = [{name: '', cols: []}];\r\n        this.curWidget.config.filters = [];\r\n        if(!this.curWidget.config.province) {\r\n            this.curWidget.config.province = {\r\n                code: ''\r\n            };\r\n        }\r\n        if(!this.curWidget.config.city) {\r\n            this.curWidget.config.city = {\r\n                code: ''\r\n            };\r\n        }\r\n        this.addWatch();\r\n    };\r\n\r\n    disKeysGroups = [];\r\n    addWatch() {\r\n        let self = this;\r\n        // this.$watch('curWidget.config.keys', changeChartStatus, true);\r\n        // this.$watch('curWidget.config.groups', changeChartStatus, true);\r\n        // this.$watch('curWidget.config.values', changeChartStatus, true);\r\n        // this.$watch('curWidget.config.filters', changeChartStatus, true);\r\n        this.addHelpMessage();\r\n        this.addValidateWatch();\r\n        // 暂时隐藏\r\n        this.changeChartStatus();\r\n        if(!this.curWidget || !this.curWidget.config) {\r\n            return;\r\n        }\r\n        if(!this.curWidget.config.province) {\r\n            this.curWidget.config.province = {\r\n                code: ''\r\n            };\r\n        }\r\n        if(!this.curWidget.config.city) {\r\n            this.curWidget.config.city = {\r\n                code: ''\r\n            };\r\n        }\r\n        if(this.curWidget.config.groups) {\r\n            _.map(this.curWidget.config.groups, (item) => {\r\n                self.disKeysGroups.push(item.id);\r\n            })\r\n        }\r\n        if(this.curWidget.config.keys) {\r\n            _.map(this.curWidget.config.keys, (item) => {\r\n                self.disKeysGroups.push(item.id);\r\n            })\r\n        }\r\n        // if(this.curWidget.config.filters) {\r\n        //     _.map(this.curWidget.config.keys, (item) => {\r\n        //         self.disfilterGroup.push(item.id);\r\n        //     })\r\n        // }\r\n    };\r\n\r\n    changeChartStatus() {\r\n        for (var type in this.chart_types_status) {\r\n            var rule = this.configRule[type];\r\n            var config = this.curWidget.config;\r\n            var flattenValues = [];\r\n            _.each(config.values, function (v) {\r\n                flattenValues = flattenValues.concat(v.cols);\r\n            });\r\n            if (_.size(config.keys) == 0 && _.size(config.groups) == 0 && _.size(flattenValues) == 0) {\r\n                r = false;\r\n            } else {\r\n                for (var k in rule) {\r\n                    var r = true;\r\n                    if (rule[k] == 2) {\r\n                        if (k == 'values') {\r\n                            r = (_.size(flattenValues) >= 1);\r\n                            if (type == 'contrast') {\r\n                                r = (_.size(flattenValues) == 2); //限制values数量为2\r\n                            }\r\n                        } else {\r\n                            r = (_.size(config[k]) >= 1);\r\n                        }\r\n                    } else if (rule[k] != -1) {\r\n                        if (k == 'values') {\r\n                            r = (_.size(flattenValues) == rule[k]);\r\n                        } else {\r\n                            r = (_.size(config[k]) == rule[k]);\r\n                        }\r\n                    }\r\n                    if (!r) {\r\n                        this.chart_types_status[type] = r;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            this.chart_types_status[type] = r;\r\n        }\r\n    };\r\n\r\n    /***************************************\r\n     *  0:  None items\r\n     *  1:  only 1 item\r\n     * -1:  None Restrict\r\n     *  2:  1 or more\r\n     ***************************************/\r\n    configRule = {\r\n        line: {keys: 2, groups: -1, filters: -1, values: 2},\r\n        pie: {keys: 2, groups: -1, filters: -1, values: 2},\r\n        kpi: {keys: 0, groups: 0, filters: -1, values: 1},\r\n        table: {keys: -1, groups: -1, filters: -1, values: -1},\r\n        funnel: {keys: -1, groups: 0, filters: -1, values: 2},\r\n        sankey: {keys: 2, groups: 2, filters: -1, values: 1},\r\n        radar: {keys: 2, groups: -1, filters: -1, values: 2},\r\n        map: {keys: 2, groups: -1, filters: -1, values: 2},\r\n        scatter: {keys: 2, groups: -1, filters: -1, values: 2},\r\n        gauge: {keys: 0, groups: 0, filters: -1, values: 1},\r\n        wordCloud: {keys: 2, groups: 0, filters: -1, values: 1},\r\n        treeMap: {keys: 2, groups: 0, filters: -1, values: 1},\r\n        areaMap: {keys: 2, groups: -1, filters: -1, values: 1},\r\n        heatMapCalendar: {keys: 1, groups: 0, filters: -1, values: 1},\r\n        heatMapTable: {keys: 2, groups: 2, filters: -1, values: 1},\r\n        liquidFill: {keys: 0, groups: 0, filters: -1, values: 1},\r\n        contrast: {keys: 1, groups: 0, filters: -1, values: 2},\r\n        chinaMap:{keys: 2, groups: -1, filters: -1, values: 2},\r\n        chinaMapBmap:{keys: 2, groups: -1, filters: -1, values: 2},\r\n        relation: {keys: 2, groups: 2, filters: -1, values: 1}\r\n    };\r\n\r\n    chart_types_status = {\r\n        \"line\": true, \"pie\": true, \"kpi\": true, \"table\": true,\r\n        \"funnel\": true, \"sankey\": true, \"radar\": true, \"map\": true,\r\n        \"scatter\": true, \"gauge\": true, \"wordCloud\": true, \"treeMap\": true,\r\n        \"heatMapCalendar\": true, \"heatMapTable\": true, \"liquidFill\": true,\r\n        \"areaMap\": true, \"contrast\": true,\"chinaMap\":true,\"chinaMapBmap\":true,\"relation\":true\r\n    };\r\n\r\n    addHelpMessage() {\r\n        var rowKey = 'HELP_MESSAGE.' + this.curWidget.config.chart_type.toUpperCase() + \".ROW\";\r\n        var columnKey = 'HELP_MESSAGE.' + this.curWidget.config.chart_type.toUpperCase() + \".COLUMN\";\r\n        var filterKey = 'HELP_MESSAGE.' + this.curWidget.config.chart_type.toUpperCase() + \".FILTER\";\r\n        var valueKey = 'HELP_MESSAGE.' + this.curWidget.config.chart_type.toUpperCase() + \".VALUE\";\r\n        var row = this.translate.instant(rowKey) == rowKey ? null : this.translate.instant(rowKey);\r\n        var column = this.translate.instant(columnKey) == columnKey ? null : this.translate.instant(columnKey);\r\n        var filter = this.translate.instant(filterKey) == filterKey ? null : this.translate.instant(filterKey);\r\n        var value = this.translate.instant(valueKey) == valueKey ? null : this.translate.instant(valueKey);\r\n        this.helpMessage = {row: row, column: column, filter: filter, value: value};\r\n    };\r\n\r\n    helpMessage = {\r\n        row: '', \r\n        column: '', \r\n        filter: '', \r\n        value: ''\r\n    };\r\n\r\n    addValidateWatch() {\r\n        // this.$watch('widgetName', this.clearAlert, true);\r\n        // this.$watch('curWidget.datasetId', this.clearAlert, true);\r\n    };\r\n\r\n    widgetName;\r\n    widgetCategory;\r\n    widgetId;\r\n    optFlag;\r\n    liteMode;\r\n    newWgt(curWidget) {\r\n        this.curWidget = {};\r\n        if (curWidget) {\r\n            this.curWidget = curWidget;\r\n        }\r\n        this.curWidget.config = {};\r\n        this.curWidget.config.option = {};\r\n        this.curWidget.expressions = [];\r\n        this.curWidget.filterGroups = [];\r\n        this.curWidget.query = {};\r\n        this.datasource = null;\r\n        this.widgetName = null;\r\n        this.widgetCategory = null;\r\n        this.widgetId = null;\r\n        this.optFlag = 'new';\r\n        this.customDs = false;\r\n        this.schema = null;\r\n        this.liteMode = false;\r\n        this.cleanPreview();\r\n        this.addValidateWatch();\r\n    };\r\n\r\n    categoryList;\r\n    getCategoryList() {\r\n        let self = this;\r\n        this.apiServer.get(\"dashboard-widgetsCategory\", null, this.requestOptions).subscribe(function (response) {\r\n            self.categoryList = response;\r\n            // $(\"#widgetName\").autocomplete({\r\n            //     source: this.categoryList\r\n            // });\r\n        });\r\n    };\r\n\r\n    getSelectedWidget(node?: TreeNode) {\r\n        // var selectedNode = jstree_GetSelectedNodes(treeID)[0];\r\n        // return _.find(this.widgetList, function (w) {\r\n        //     return w.id == selectedNode.id;\r\n        // });\r\n        let selectedNode = node || this.tree.treeModel.getActiveNode();\r\n\r\n        return this.widgetList.filter((ds: any) => {\r\n            return ds.id === selectedNode.id;\r\n        })[0];\r\n    };\r\n\r\n    deleteNode() {\r\n        // if (!this.checkTreeNode(\"delete\")) return;\r\n        // this.deleteWgt(this.getSelectedWidget());\r\n        if (!this.treeService.checkTreeNode('delete', this.tree)) {\r\n            return;\r\n        }\r\n        this.deleteWgt(this.getSelectedWidget());\r\n    };\r\n\r\n    deleteWgt(widget) {\r\n        let self = this;\r\n        this.dialogService.confirm(\r\n                this.translate.instant('COMMON.CONFIRM_DELETE'), 'COMMON.TIP'\r\n            ).result.then(function () {\r\n                self.apiServer.post(\"dashboard-deleteWidget\", {id: widget.id}, self.requestOptions).subscribe(function (serviceStatus: any) {\r\n                    if (serviceStatus.status == '1') {\r\n                        self.getWidgetList();\r\n                    } else {\r\n                        self.dialogService.show(serviceStatus.msg || self.translate.instant(\"COMMON.SUCCESS\"), {windowClass: \"modal-warning\",size: \"lg\"});\r\n                    }\r\n                    self.optFlag == 'none';\r\n                });\r\n            });\r\n    };\r\n\r\n    ngOnInit() {\r\n        let self = this;\r\n        this.treeOptions.actionMapping = {\r\n            mouse: {\r\n                dblClick: (tree, node, $event) => {\r\n                    if (!node.hasChildren) {\r\n                        self.editNode(node);\r\n                    }\r\n                }\r\n            },\r\n            keys: {\r\n                46: (tree, node, $event) => {\r\n                    self.deleteNode();\r\n                }\r\n            }\r\n        };\r\n\r\n        // 搜索初始化\r\n        this.searchObservable = new BehaviorSubject<string>(this.keywords).pipe(\r\n            debounceTime(10),\r\n            distinctUntilChanged()\r\n        );\r\n        this.searchObservable.subscribe((keywords: string) => {\r\n            self.searchNode();\r\n        });\r\n\r\n        // 获取树\r\n        this.loadDatasource();\r\n    }\r\n}"]}