{"version":3,"sources":["src/param/param-selector.component.ts"],"names":[],"mappings":"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","file":"../../../src/param/param-selector.component.js","sourcesContent":["import { Component } from '@angular/core';\r\n\r\nimport { AfterDialogInit, DialogResult } from 'core-services/core';\r\n\r\n@Component({\r\n    template: require('./param-selector.component.html!text')\r\n})\r\n\r\nexport class ParamSelectorComponent implements AfterDialogInit {\r\n    private fetchSelects: any;\r\n\r\n    types = ['=', '≠', '>', '<', '≥', '≤', '(a,b]', '[a,b)', '(a,b)', '[a,b]'];\r\n    Keyword = '';\r\n    selects = [];\r\n    selectItems = [];\r\n    param: any;\r\n    filter: boolean;\r\n    operate: any = {};\r\n    byFilter = {\r\n        a: false\r\n    };\r\n    loadSelect = true;\r\n    loading = false;\r\n\r\n    constructor() {}\r\n\r\n    private showValues() {\r\n        let owner = this;\r\n        let equal = ['=', '≠'];\r\n        let openInterval = ['>', '<', '≥', '≤'];\r\n        let closeInterval = ['(a,b]', '[a,b)', '(a,b)', '[a,b]'];\r\n\r\n        this.operate.equal = equal.some((item: any) => {\r\n            return item === owner.param.type;\r\n        });\r\n        this.operate.openInterval = openInterval.some((item: any) => {\r\n            return item === owner.param.type;\r\n        });\r\n        this.operate.closeInterval = closeInterval.some((item: any) => {\r\n            return item === owner.param.type;\r\n        });\r\n    }\r\n\r\n    afterDialogInit(dialog: DialogResult, modalContent: any) {\r\n        this.filter = dialog.data.filter;\r\n        this.param = dialog.data.param;\r\n        if (this.param.values.length === 0) {\r\n            this.param.values.length = 1;\r\n        }\r\n        this.fetchSelects = dialog.data.getSelects;\r\n        this.showValues();\r\n    }\r\n\r\n    dbclickPush(o) {\r\n        if (this.operate.equal) {\r\n            if (this.param.values.length === 1 && (!this.param.values[0] || this.param.values[0] === '')) {\r\n                this.param.values.length = 0;\r\n            }\r\n            this.param.values.push(o);\r\n        }\r\n        if (this.operate.openInterval) {\r\n            this.param.values[0] = o;\r\n        }\r\n        if (this.operate.closeInterval) {\r\n            if (this.param.values[0] === undefined || this.param.values[0] === '') {\r\n                this.param.values[0] = o;\r\n            } else {\r\n                this.param.values[1] = o;\r\n            }\r\n        }\r\n    }\r\n\r\n    deleteValues(array) {\r\n        if (this.operate.equal) {\r\n            this.param.values = this.param.values.filter((item: any) => {\r\n                return array.indexOf(item) < 0;\r\n            });\r\n        }\r\n    }\r\n\r\n    pushValues() {\r\n        if (this.param.values.length === 1 && (!this.param.values[0] || this.param.values[0] === '')) {\r\n            this.param.values.length = 0;\r\n        }\r\n        if (this.operate.openInterval) {\r\n            this.selectItems.splice(1, this.selectItems.length - 1);\r\n        }\r\n        if (this.operate.closeInterval) {\r\n            this.selectItems.splice(2, this.selectItems.length - 2);\r\n        }\r\n        this.param.values = this.param.values.concat(this.selectItems);\r\n        this.selectItems = [];\r\n    }\r\n\r\n    filterType() {\r\n        this.param.values = [];\r\n        this.param.values.length = 1;\r\n        this.showValues();\r\n    }\r\n\r\n    getSelects() {\r\n        let owner = this;\r\n\r\n        this.loading = true;\r\n        this.fetchSelects(this.byFilter.a, this.param.col, function (d) {\r\n            owner.selects = d;\r\n            owner.loading = false;\r\n        });\r\n    }\r\n\r\n    getFilteredOptions(): Array<any> {\r\n        let owner = this;\r\n\r\n        return this.selects.filter((item: any) => {\r\n            return owner.param.values.indexOf(item) < 0 && item.indexOf(owner.Keyword) > -1;\r\n        });\r\n    }\r\n}"]}