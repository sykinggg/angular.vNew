{"version":3,"sources":["src/chart/render/cBoardHeatMapRender.service.ts"],"names":[],"mappings":"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","file":"../../../../src/chart/render/cBoardHeatMapRender.service.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport * as $ from 'jquery';\r\nimport { CHART_BASIC_OPTION } from '../chart-options';\r\n\r\n@Injectable()\r\n\r\nexport class CBoardHeatMapRenderService {\r\n    constructor() {}\r\n\r\n    isDeppSpec;\r\n    public cBoardHeatMapRender = function (jqContainer, options, isDeepSpec, echarts) {\r\n        this.container = jqContainer; // jquery object\r\n        var heatMap = jqContainer.get(0);\r\n        $(heatMap).css(\"width\", \"100%\");\r\n        $(heatMap).css(\"height\", \"500px\");\r\n        this.ecc = echarts.init(jqContainer.get(0), this.theme);\r\n        this.isDeppSpec = isDeepSpec;\r\n        this.options = options;\r\n\r\n        return this;\r\n    };\r\n\r\n    public theme = \"theme-fin1\";\r\n\r\n    options;\r\n    jqContainer;\r\n    ecc;\r\n    container;\r\n    public chart(group, persist) {\r\n        var self = this;\r\n        var options = this.isDeppSpec == true ? self.options : $.extend(true, {}, CHART_BASIC_OPTION, self.options);\r\n        if (options.visualMap != undefined) {\r\n            $(this.jqContainer).css({\r\n                height: 500 + \"px\",\r\n                width: '100%'\r\n            });\r\n        }\r\n        if (options.legend.data && options.legend.data.length > 35) {\r\n            options.grid.top = '5%';\r\n            options.legend.show = false;\r\n        }\r\n        if (persist) {\r\n            options.animation = false;\r\n        }\r\n        self.ecc.setOption(options);\r\n        self.changeSize(self.ecc);\r\n        self.container.resize(function (e) {\r\n            self.ecc.resize();\r\n            self.changeSize(self.ecc);\r\n        }); // 图表大小自适应\r\n        if (group) {\r\n            self.ecc.group = group;\r\n            echarts.connect(group);\r\n        }\r\n        if (persist) {\r\n            setTimeout(function () {\r\n                persist.data = self.ecc.getDataURL({\r\n                    type: 'jpeg',\r\n                    pixelRatio: 2,\r\n                    backgroundColor: '#fff'\r\n                });\r\n                persist.type = \"jpg\";\r\n                persist.widgetType = \"echarts\";\r\n            }, 1000);\r\n        }\r\n        return function (o) {\r\n            o = $.extend(true, {}, CHART_BASIC_OPTION, o)\r\n            self.ecc.setOption(o, true);\r\n        }\r\n    };\r\n\r\n    public changeSize(instance) {\r\n        var o = instance.getOption();\r\n        var seriesType = o.series[0] ? o.series[0].type : null;\r\n        if (seriesType == 'pie') {\r\n            var l = o.series.length;\r\n            var b = instance.getWidth() / (l + 1 + l * 8)\r\n            for (var i = 0; i < l; i++) {\r\n                if ((b * 8) < (instance.getHeight() * 0.75)) {\r\n                    o.series[i].radius = [0, b * 4];\r\n                } else {\r\n                    o.series[i].radius = [0, '75%'];\r\n                }\r\n            }\r\n            instance.setOption(o);\r\n        }\r\n    \r\n    };\r\n}"]}